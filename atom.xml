<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jifeng Wu&#39;s Personal Website</title>
  
  <subtitle>Jifeng Wu&#39;s Personal Website</subtitle>
  <link href="https://abbaswu.github.io/atom.xml" rel="self"/>
  
  <link href="https://abbaswu.github.io/"/>
  <updated>2023-02-11T06:48:49.050Z</updated>
  <id>https://abbaswu.github.io/</id>
  
  <author>
    <name>Jifeng Wu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Paper Review: &quot;Types and Programming Languages&quot; Chapter 15 and Chapter 16</title>
    <link href="https://abbaswu.github.io/2023/02/10/Paper-Review-Types-and-Programming-Languages-Chapter-15-and-Chapter-16/"/>
    <id>https://abbaswu.github.io/2023/02/10/Paper-Review-Types-and-Programming-Languages-Chapter-15-and-Chapter-16/</id>
    <published>2023-02-10T08:00:00.000Z</published>
    <updated>2023-02-11T06:48:49.050Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Chapter 15, “Subtyping,” describes adding Subtyping with Functions and Records into Simply Typed Lambda Calculus. It formalizes the Subtype Relation as a collection of Inference Rules, verifies that verify that the Preservation and Progress Theorems of Simply Typed Lambda Calculus still apply, examines Ascription (or Casting) in the context of Subtyping, and proposes Subtyping Rules for Variants, Lists, References, and Arrays. Finally, it presents alternative Coercion Semantics for Subtyping. Chapter 16, “Metatheory of Subtyping,” observes that the Subtyping Rules presented in the previous chapter are not syntax-directed and have overlapping conclusions, which impedes implementing a Typechecking Algorithm, and develops the Algorithmic Subtype Relation and the Algorithmic Typing Relation to address these problems.</p><h1 id="Critique"><a href="#Critique" class="headerlink" title="Critique"></a>Critique</h1><h2 id="Acquired-Insights"><a href="#Acquired-Insights" class="headerlink" title="Acquired Insights"></a>Acquired Insights</h2><p>I will first summarize the insights that I gained while reading these Chapters.</p><p>An empty Bottom Type is useful, both as a way of expressing that a Function is not intended to return and telling the Typechecker that the Term can be associated with any Type.</p><p>Implementing Ascription (Casting) in Subtyping is non-trivial, especially for Downcasting. As blindly following Type Assertions may lead to potentially serious consequences, the Compiler would need to insert a Runtime Type Check, essentially adding the Machinery for Typechecking to the Runtime System. This might incur a significant performance overhead.</p><p>Different from an Inheritance Based Class Hierarchy, which is a physical relationship between Types, Subtyping generally is more of a <em>logical relationship</em> between Types. For example, in the alternative Coercion Semantics for Subtyping, we can consider that <code>int</code> and <code>float</code>, two Types that do not inherit from one another, have a Subtyping Relation, as they can be converted to one another. In this case, the Subtyping Relation is compiled to Coercions at runtime (instructions physically converting an <code>int</code> to a <code>float</code>, or vice versa), which are much more efficient than virtual function calls frequently seen in an Inheritance Based Class Hierarchy.</p><h2 id="Background-Knowledge"><a href="#Background-Knowledge" class="headerlink" title="Background Knowledge"></a>Background Knowledge</h2><p>There is no doubt that the Chapters are written in great detail. However, I find some of the content, especially the terminology, a little difficult to understand, and I have looked into background knowledge concerning the topic. Below summarizes what I have read.</p><h3 id="Polymorphism"><a href="#Polymorphism" class="headerlink" title="Polymorphism"></a>Polymorphism</h3><p>Polymorphism describes that a single Interface can work with Terms of Different Types in Programming Languages. There are different kinds of Polymorphism in the context of Programming Languages, including:</p><h4 id="Parametric-Polymorphism"><a href="#Parametric-Polymorphism" class="headerlink" title="Parametric Polymorphism"></a>Parametric Polymorphism</h4><p>Also known as “Generic Programming”. Using Abstract Symbols that can substitute for any Type instead of specifying Concrete Types in Interfaces. C++’s Template Metaprogramming comes close to Parametric Polymorphism (except for Template Specializations).</p><h4 id="Ad-Hoc-Polymorphism"><a href="#Ad-Hoc-Polymorphism" class="headerlink" title="Ad Hoc Polymorphism"></a>Ad Hoc Polymorphism</h4><p>Defining a Common Interface for a Set of Individually Specified Types. Includes Function Overloading, Operator Overloading, and C++’s Template Metaprogramming with Template Specializations.</p><h4 id="Subtyping"><a href="#Subtyping" class="headerlink" title="Subtyping"></a>Subtyping</h4><p>It is a form of Polymorphism in which the Terms of a Subtype <code>T</code>, which is related to another Type known as the Supertype <code>T&#39;</code> in some way, can be safely used in any Context where the Terms of <code>T&#39;</code> are used.</p><p>The Concept of Subtyping has gained visibility with the advent of Object Oriented Programming Languages, where it is frequently the case that an Inheritance Based Class Hierarchy forms the basis of Subtyping, and such Safe Substitution is known as the Liskov Substitution Principle.</p><p>However, stepping out of this specific and widely known context, there are several different Schemes of Subtyping. They can be broadly classified along two dimensions: Nominal Subtyping vs. Structural Subtyping and Inclusive Implementations vs. Coercive Implementations.</p><p>Nominal Subtyping requires the Subtyping Relation to be explicitly declared among the two Types. This is the case with the Subtyping based on an Inheritance Based Class Hierarchy frequently encountered in Object Oriented Programming Languages. In contrast, in Structural Subtyping, a Type <code>T</code> is <strong>implicitly</strong> the Subtype of another Type <code>T&#39;</code> if Terms of <code>T</code> has all the Properties of Terms of <code>T&#39;</code> and can handle all the Messages Terms of <code>T&#39;</code> can handle. This is closely related to Row Polymorphism or the so-called Duck Typing in Dynamically Typed Programming Languages.</p><p>On another dimension, Implementations of Subtyping can be divided into Inclusive Implementations and Coercive Implementations. In Inclusive Implementations, any Term of a Subtype, left unchanged, is <strong>automatically</strong> a Term of a Supertype. This is often the case with the Subtyping based on an Inheritance Based Class Hierarchy frequently encountered in Object Oriented Programming Languages. A Term can have multiple Types in this situation. In contrast, Coercive Implementations are defined by <strong>Type Conversion Functions</strong> from Subtype to Supertype and allow a Term of a Subtype to be <strong>converted</strong> to a Term of a Supertype, such as the case for <code>int</code>‘s, <code>float</code>‘s, and <code>str</code>‘s. It is also worth noticing that applying the Type Coercion Function from <code>A</code> to <code>B</code> and then from <code>B</code> to <code>C</code> might have a different result from directly applying the Type Coercion Function from <code>A</code> to <code>C</code>. For example, <code>str(float(2))</code> returns a value different from <code>str(2)</code>.</p><p>Based on the concept of Subtyping, the concept of Variance reference to how the Subtyping Relations between more complex Types relates to the Subtyping Relations between the simpler Types they include. For example, given that <code>Cat</code> is a Subtype of <code>Animal</code>, should a List of <code>Cat</code>‘s be a Subtype of a List of <code>Animal</code>‘s? What about a Function that takes a Term of Type <code>Cat</code> as an Arugument and a Function that takes a Term of Type <code>Animal</code> as an Arugument?</p><p>Different Programming Languages have different implementations, but most Programming Languages respect the following patterns.</p><ul><li>If the Complex Types are <strong>Read Only and&#x2F;or capable of returning Terms of the Simple Types</strong>, they should have the <strong>same</strong> Subtyping Relations as the Simple Types. This is known as <strong>Covariance</strong>. For example,<ul><li>A read-only List of <code>Cat</code>‘s can be used whenever a read-only List of <code>Animal</code>‘s is required, as each Term read from the read-only List of <code>Cat</code>‘s is of Type <code>Cat</code>, which is a Subtype of <code>Animal</code>. In other words, <code>const List&lt;Cat&gt;</code> <em>is</em> a Subtype of <code>const List&lt;Animal&gt;</code>.</li><li>It is not safe to use a <code>const List&lt;Animal&gt;</code> where a <code>const List&lt;Cat&gt;</code> is required, as a Term read from a <code>const List&lt;Animal&gt;</code> may not be of Type <code>Cat</code>. In other words, <code>const List&lt;Animal&gt;</code> <em>is not</em> a Subtype of <code>const List&lt;Cat&gt;</code>.</li></ul></li><li>If the Complex Types are <strong>Write Only and&#x2F;or capable of accepting Terms of the Simple Types as Parameters</strong>, they should have the <strong>opposite</strong> Subtyping Relations as the Simple Types. This is known as <strong>Contravariance</strong>. For example,<ul><li>A Function that takes a Term of Type <code>Animal</code> as a Parameter may be used where a Function that takes a Term of Type <code>Cat</code> as a Parameter is used, as each Term of Type <code>Cat</code> can also be passed as a Parameter of Type <code>Animal</code>. In other words, <code>Animal -&gt; T</code> <em>is</em> a Subtype of <code>Cat -&gt; T</code>.</li><li>It is not safe to use a <code>Cat -&gt; T</code> where an <code>Animal -&gt; T</code> is required, as a Term of Type <code>Animal</code> may not be passed as a Parameter of Type <code>Cat</code>. In other words, <code>Cat -&gt; T</code> <em>is not</em> a Subtype of <code>Animal -&gt; T</code>.</li></ul></li><li>If the Complex Types are <strong>Read&#x2F;Write</strong>, they should have <strong>no</strong> Subtying Relations. This is known as <strong>Invariance</strong>. For example,<ul><li>A Term written into a <code>List&lt;Animal&gt;</code> need not be of Type <code>Cat</code>, but a Term written into a (non-constant) <code>List&lt;Cat&gt;</code> <em>must</em> be of Type <code>Cat</code>. Thus, it is not safe to use a <code>List&lt;Cat&gt;</code> where a <code>List&lt;Animal&gt;</code> is required. In other words, <code>List&lt;Cat&gt;</code> <em>is not</em> a Subtype of <code>List&lt;Animal&gt;</code>.</li><li>A Term read from a (non-constant) <code>List&lt;Animal&gt;</code> may not be of Type <code>Cat</code>. Thus it is not safe to use a <code>List&lt;Animal&gt;</code> where a <code>List&lt;Cat&gt;</code>is required. In other words, <code>List&lt;Animal&gt;</code> <em>is not</em> a Subtype of <code>List&lt;Cat&gt;</code>.</li></ul></li></ul><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul><li><a href="https://en.wikipedia.org/wiki/Polymorphism_(computer_science)">https://en.wikipedia.org/wiki/Polymorphism_(computer_science)</a></li><li><a href="https://stackoverflow.com/questions/36948205/why-is-c-said-not-to-support-parametric-polymorphism">https://stackoverflow.com/questions/36948205/why-is-c-said-not-to-support-parametric-polymorphism</a></li><li><a href="https://en.wikipedia.org/wiki/Subtyping">https://en.wikipedia.org/wiki/Subtyping</a></li><li><a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)">https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Summary&quot;&gt;&lt;a href=&quot;#Summary&quot; class=&quot;headerlink&quot; title=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h1&gt;&lt;p&gt;Chapter 15, “Subtyping,” describes adding Subtypin</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Type Systems" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Type-Systems/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: &quot;Types and Programming Languages&quot; Chapter 13 and Chapter 14</title>
    <link href="https://abbaswu.github.io/2023/02/05/Paper-Review-Types-and-Programming-Languages-Chapter-13-and-Chapter-14/"/>
    <id>https://abbaswu.github.io/2023/02/05/Paper-Review-Types-and-Programming-Languages-Chapter-13-and-Chapter-14/</id>
    <published>2023-02-05T08:00:00.000Z</published>
    <updated>2023-02-05T19:48:55.389Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Chapters 13 and 14 of “Types and Programming Languages” discuss adding Impure Features, also known as Computational Effects, into Simply Typed Lambda Calculus. Specifically, Chapter 13 discusses adding References to Mutable Cells that can be Allocated, Dereferenced, and Assigned and formalizes their Operational Behavior. Chapter 14 gradually adds Raising and Handling Exceptions, starting from a Term <code>error</code> of any Type that completely aborts Evaluation when applied as a Function or passed as an Argument to a Function, before supporting Exception Handling, as well as Raising a Value (potentially containing information about what unusual thing happened) as an Exception.</p><h1 id="Critique"><a href="#Critique" class="headerlink" title="Critique"></a>Critique</h1><p>Overall, I believe these two Chapters are written very well, as they progressively add realistic features to Simply Typed Lambda Calculus. I will summarize takeaways from this paper before presenting some questions and comments.</p><h2 id="Takeaways-From-This-Paper"><a href="#Takeaways-From-This-Paper" class="headerlink" title="Takeaways From This Paper"></a>Takeaways From This Paper</h2><h3 id="References-to-Mutable-Cells"><a href="#References-to-Mutable-Cells" class="headerlink" title="References to Mutable Cells"></a>References to Mutable Cells</h3><p>The Formalization of the Operational Behavior of References to Mutable Cells encompasses Allocations (providing an initial value to a Mutable Cell), Dereferences (reading the current value of the referenced Cell), and Assignments (changing the value stored in the referenced Cell), but not Deallocations. Explicit Deallocations lead to the Dangling Reference Problem, which undermines Type Safety. Instead, References to Mutable Cells that are no longer needed should be Garbage Collected.</p><p>An interpretation of how Aliasing makes Program Analysis tricky is that Aliasing essentially sets up “Implicit Communication Channels in the form of Shared State” between different parts of a Program.</p><p>To formalize the Operational Behavior of References to Mutable Cells, we can consider a Reference $l \in L$, where $L$ is the set of Locations of the Program’s Store (a.k.a. Heap Memory) $\mu$.</p><p>As the result of Evaluating an Expression depends on the current contents of the Store and may cause Side Effects for the Store, Evaluation Rules should, in addition to Terms and Types, take the Store as an Argument and return a new Store as part of the result of Evaluating an Expression.</p><p>Furthermore, in a naive implementation of Typing Rules for References to Mutable Cells, the Type of the Reference depends on the Type of the Mutable Cell, e.g., $\frac{\Gamma \vdash \mu(l): T}{\Gamma \vdash l: \text{Ref} : T}$. However, this is inefficient where there are multiple levels of Indirection and is problematic where there are Cyclic References. To solve this problem, the Chapter proposes extending Typing Rules with a Store Typing $\Sigma$, which maps every Location $l \in L$ to a fixed, definite Type. In this case, the Typing Rule is written as $\frac{\Gamma | \Sigma \vdash \Sigma(l): T}{\Gamma | \Sigma \vdash l: \text{Ref} : T}$.</p><h3 id="Raising-and-Handling-Exceptions"><a href="#Raising-and-Handling-Exceptions" class="headerlink" title="Raising and Handling Exceptions"></a>Raising and Handling Exceptions</h3><p>The first (and most straightforward) Approach to Raising and Handling Exceptions, a Term <code>error</code> that completely aborts Evaluation when applied as a Function or passed as an Argument to a Function, effectively simulates Unwinding the Call Stack when it propagates <code>error</code> to the top level.</p><p>The final approach that supports both Exception Handling and Raising a Value as an Exception considers an Exception to be a Value $t_{exp}$ of Type $T_{exp}$ (instead of a Term <code>error</code>). It proposes a Term Constructor <code>raise t_&#123;exp&#125;</code> that describes Raising a Value as an Exception, and models Exception Handling with <code>try t_1 with t_2: T_1</code>, in which $t_1: T_1$ and $t_2: T_{exp} \rightarrow T_1$ (i.e., $t_2$ is a function, called when an Exception is Raised, taking a Raised Exception as Input and Returning a Value of the same Type as $t_1$ as Output). </p><h2 id="Questions-and-Comments"><a href="#Questions-and-Comments" class="headerlink" title="Questions and Comments"></a>Questions and Comments</h2><p>After reading these two Chapters, the power of Functions as a Universal Abstraction has left a deep impression on me. For example:</p><ul><li>Arrays containing Terms of Type $T$ can be modeled as References to Functions of type $Nat \rightarrow T$. The Referenced Function looks up the Element given an Index.</li><li>Exception Handling is modeled with <code>try t_1 with t_2</code>, in which $t_2$ is a function called when an Exception is Raised, taking a Raised Exception as Input and Returning a Value of the same Type as $t_1$ as Output).</li></ul><p>This describes complex Side Effects in a realistic Programming Language in a Side Effect Free manner that is clean and easy to reason about while not sacrificing Expressiveness. Are there any other complex Side Effects that can be modeled like this using Functions?</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Summary&quot;&gt;&lt;a href=&quot;#Summary&quot; class=&quot;headerlink&quot; title=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h1&gt;&lt;p&gt;Chapters 13 and 14 of “Types and Programming Langu</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Type Systems" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Type-Systems/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Bi-directional type checking</title>
    <link href="https://abbaswu.github.io/2023/01/30/Paper-Review-Bi-directional-type-checking/"/>
    <id>https://abbaswu.github.io/2023/01/30/Paper-Review-Bi-directional-type-checking/</id>
    <published>2023-01-30T08:00:00.000Z</published>
    <updated>2023-02-01T20:51:56.304Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://williamjbowman.com/teaching/2022/w2/cpsc539b/">Topics in Programming Languages: Type Systems</a>. The original paper can be found <a href="http://www.davidchristiansen.dk/tutorials/bidirectional.pdf">here</a>.</p><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>The paper first explains that except Syntax Directed Systems, Typing Rules cannot be directly translated into Algorithms for Type Checking and Type Inference. It presents a motivating example of this using a Simply Typed Lambda Calculus having Bool and Function as Types and Bool Constants, Variables, Function Abstractions, Function Applications, and Conditional Expressions as Terms, in which the Typing Rule for Function Abstractions cannot be directly translated into a Function for Type Inference.</p><p>It then presents Bidirectional Typing as a remedy to this problem. It explains what Bidirectional Typing is, discusses its advantage, and adds Bidirectional Typing into the previously presented Simply Typed Lambda Calculus, presenting how Bidirectional Typing works during the process.</p><p>Finally, it discusses the limitations of Bidirectional Typing and presents academic literature for further reading.</p><h1 id="Critique"><a href="#Critique" class="headerlink" title="Critique"></a>Critique</h1><p>Overall, I believe this paper is written very well, as I can grasp most of it after reading it. I will summarize my takeaways from this paper before presenting some questions and comments.</p><h2 id="My-Takeaways-From-This-Paper"><a href="#My-Takeaways-From-This-Paper" class="headerlink" title="My Takeaways From This Paper"></a>My Takeaways From This Paper</h2><h3 id="What-Bidirectional-Typing-Is"><a href="#What-Bidirectional-Typing-Is" class="headerlink" title="What Bidirectional Typing Is"></a>What Bidirectional Typing Is</h3><p>Bidirectional Typing splits each Typing Rule $\Gamma \vdash t: T$ into:</p><ul><li>An Inference Rule $\Gamma \vdash t \Rightarrow T$, which <em>infers</em> $t$’s type to be $T$ in Context $\Gamma$.</li><li>A Type Checking Rule $\Gamma \vdash t \Leftarrow T$, which <em>checks</em> $t$’s type to be $T$ in Context $\Gamma$.</li></ul><p>The Inference Rules and Type Checking Rules would work together and call each other.</p><h3 id="Advantages-of-Bidirectional-Typing"><a href="#Advantages-of-Bidirectional-Typing" class="headerlink" title="Advantages of Bidirectional Typing"></a>Advantages of Bidirectional Typing</h3><ul><li>Makes general Typing Rules more Syntax Directed, thus, simplifying implementing Algorithms for Type Checking and Type Inference.</li><li>Requires relatively few additional Type Annotations.</li><li>Produces good error messages that report where the error occurs.</li></ul><h3 id="Limitations-of-Bidirectional-Typing"><a href="#Limitations-of-Bidirectional-Typing" class="headerlink" title="Limitations of Bidirectional Typing"></a>Limitations of Bidirectional Typing</h3><ul><li>Variables in a Derivation can no longer be replaced by the Derivation for a Term of the same Type. This is because Bidirectional Typing uses Inference Mode to check Variables but uses Checking Mode to check many other Terms.</li><li>In some situations, explicit Type Annotations may need to be written within complex Terms, such as a direct Application of a Function Abstraction, like <code>(λ b . if b then false else true) true: Bool</code></li></ul><h2 id="Questions-and-Comments"><a href="#Questions-and-Comments" class="headerlink" title="Questions and Comments"></a>Questions and Comments</h2><ul><li>Page 8 mentions, “remember that the derivation, like the bidirectional typing rules, should be read bottom-to-top and left-to-right.” However, Inference Rules have the form of $\frac{Premise}{Conclusion}$. So, why should the derivation be read from Conclusion to Premise?</li><li>What are the meanings of the small-step rule $\frac{}{t : T \rightarrow t}$ and the large-step rule $\frac{t \Downarrow t’}{t : T \Downarrow t’}$ on Page 8?</li><li>I believe explicit Type Annotations should be enforced for the Parameters within Function Abstractions, such as <code>(λ b: Bool . if b then false else true)</code> instead of <code>(λ b . if b then false else true)</code>.<ul><li>This aligns with real-world programming languages (C++, Java, Rust, Swift, Haskell, etc.)</li><li>This increases readability.</li><li>This simplifies both the Typing Rules and the Inference Rules and Type Checking Rules of Bidirectional Typing.</li></ul></li></ul><h1 id="Feedback-from-the-Class-Discussion"><a href="#Feedback-from-the-Class-Discussion" class="headerlink" title="Feedback from the Class Discussion"></a>Feedback from the Class Discussion</h1><p>Small Step Semantics, represented using $\rightarrow$’s, depict <strong>one step in Evaluation</strong>. For example, if $e$ is $true$ itself, $\text{if}: e : \text{then} : e_1 : \text{else} : e_2$ can be Evaluated <strong>in one step</strong> to $e_1$. This can be represented using $\frac{e \rightarrow true}{\text{if}: e : \text{then} : e_1 : \text{else} : e_2 \rightarrow e_1}$</p><p>Big Step Semantics, represented using $\Downarrow$’s, depict <strong>Reducing a Subexpression to a Value through several Small Steps</strong>. For example, if $e$ is a Subexpression that can be Reduced to $true$ after several Small Steps, $\text{if}: e : \text{then} : e_1 : \text{else} : e_2$ can be Reduced to $e_1$ <strong>after several Small Steps</strong>. This can be represented using $\frac{e \Downarrow true}{\text{if}: e : \text{then} : e_1 : \text{else} : e_2 \Downarrow e_1}$.</p><p>Syntax Directed means a one-to-one correspondence between the Type of the Term and the Syntax (Derivation of the Grammar Rules) of the Term.</p><p>There is no precise definition for Bidirectional Typing. Instead, Bidirectional Typing points a direction toward implementing a Type Inference&#x2F;Type Checking Algorithm.</p><p>In Bidirectional Typing, we prefer to start from Inference Mode because if we can Infer the Type of a Term, we can Check the Type of the Term, while Checking falls back on Inference.</p><p>Why is there only a Checking Rule and no Inference Rule for <code>if t then t else t</code>?</p><ul><li>This gives better error messages.<ul><li>Should the Terms in the <code>then</code> branch and the <code>else</code> branch have different types, it is possible to give an error message directly stating this information.</li><li>If an Inference Rule had been proposed instead, it would blame one branch for having a wrong type, which may be confusing and go against programmer intent.</li></ul></li></ul><p>We can read Typing Rules either from top to bottom or from bottom to top, with slightly different interpretations.</p><ul><li>Reading from top to bottom describes how to use the information for Type Checking.</li><li>Reading from bottom to top describes how a Type Inference Algorithm works, e.g., what needs to be Checked to Infer the Type of a Term.</li></ul><p>From a historical perspective, there are two Design Philosophies for Type Systems.</p><ul><li>The first is to augment a Programming Language with more information, such as C which uses it to determine how much space a variable would take up in memory.</li><li>The second is to express programmer intent.</li></ul><p>Type Annotations (Ascriptions) for Parameters are required for Functions that are not immediately used, such as Top Level Functions. However, it is helpful to omit Type Annotations (Ascriptions) for Parameters for immediately used Lambda Terms within Higher Order Functions.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://williamjbowman.com/teaching/2022/w2/cpsc539b/&quot;&gt;Topics in Programming Languages: Type Sy</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Type Systems" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Type-Systems/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: &quot;Types and Programming Languages&quot; Chapter 9 and Chapter 11</title>
    <link href="https://abbaswu.github.io/2023/01/25/Paper-Review-Types-and-Programming-Languages-Chapter-9-and-Chapter-11/"/>
    <id>https://abbaswu.github.io/2023/01/25/Paper-Review-Types-and-Programming-Languages-Chapter-9-and-Chapter-11/</id>
    <published>2023-01-25T08:00:00.000Z</published>
    <updated>2023-02-05T04:06:45.613Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Chapter 9 of “Types and Programming Languages” presents the simply typed lambda calculus, which constructs a type system for pure lambda calculus, explaining theoretical aspects such as the typing relation and the Curry-Howard Correspondence along the way.</p><p>Chapter 11 introduces simple extensions to the simply typed lambda calculus presented in Chapter 9, such as base types, derived forms, type ascriptions, let bindings, and some compound data structures (pairs, tuples, records, sums, variants, and lists), making it better resemble a real-world programming language.</p><h1 id="Critique"><a href="#Critique" class="headerlink" title="Critique"></a>Critique</h1><h2 id="Foreword"><a href="#Foreword" class="headerlink" title="Foreword"></a>Foreword</h2><p>I have found the textbook hard to follow in many places. Thus, I have followed the textbook and looked into many online resources to grasp the content. Below summarizes my understanding after studying the material.</p><h2 id="Basic-Concepts-in-Type-Theory"><a href="#Basic-Concepts-in-Type-Theory" class="headerlink" title="Basic Concepts in Type Theory"></a>Basic Concepts in Type Theory</h2><h3 id="Terms-and-Types"><a href="#Terms-and-Types" class="headerlink" title="Terms and Types"></a>Terms and Types</h3><p>In Type Theory, every Term has a Type, often written together as <code>&lt;Term&gt;: &lt;Type&gt;</code>. Types include Natural Numbers (<code>nat</code>) and Boolean Logic Values (<code>bool</code>). For example (assuming <code>x: nat</code> and <code>y: nat</code>):</p><ul><li><code>0: nat</code></li><li><code>x: nat</code></li><li><code>1 + 1: nat</code></li><li><code>x + y: nat</code></li><li><code>true: bool</code></li><li><code>x + y: nat</code></li></ul><h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><p>Functions are also Terms with Types, represented as Lambda Terms.</p><p>A Lambda Term looks like <code>(λ &lt;First Parameter Name&gt;: &lt;First Parameter Type&gt; &lt;Second Parameter Name&gt;: &lt;Second Parameter Type&gt; ... . &lt;Term to Return&gt;)</code>.</p><p>It has type <code>&lt;First Parameter Type&gt; → &lt;Second Parameter Type&gt; → ... → &lt;Type of Term to Return&gt;</code>. This indicates that the Lambda Term is a function that takes Parameters of <code>&lt;First Parameter Type&gt;</code>, <code>&lt;Second Parameter Type&gt;</code>, etc., and returns a Term of <code>&lt;Type of Term to Return&gt;</code>.</p><p>Examples of Lambda Terms:</p><ul><li><code>(λ x: nat . (x + x)): nat → nat</code>: a Function which takes in a Parameter <code>x</code> of Type <code>nat</code> and returns the doubled Parameter.</li><li><code>(λ x: nat y: nat . (x + y)): nat → nat → nat</code>: a Function which takes in two Parameters <code>x</code>, <code>y</code> all of Type <code>nat</code> and returns their sum.</li></ul><p>A Lambda Term is often called an Anonymous Function because it has no Name. We can use the notion to give a Name to a Lambda Term:</p><ul><li><code>add: nat → nat → nat ::= (λ x: nat y: nat . (x + y))</code></li></ul><h3 id="Function-Applications"><a href="#Function-Applications" class="headerlink" title="Function Applications"></a>Function Applications</h3><p>In Type Theory, a Function Call is called a Function Application, which “takes a Term of a Type and results in a Term of another Type.” Function Application is written as <code>&lt;Function&gt; &lt;Argument&gt; &lt;Argument&gt; ...</code> (akin to Function Calls in Haskell and Commands in Unix Shell) instead of the conventional <code>&lt;Function&gt;(&lt;Argument&gt;, &lt;Argument&gt;, ...)</code> in Programming Languages.</p><p>If we define a Function <code>add</code> that takes two <code>nat</code>‘s and returns a <code>nat</code>, the following are valid Terms:</p><ul><li><code>add 0 0: nat</code></li><li><code>add 2 3: nat</code></li><li><code>add 1 (add 1 (add 1 0)): nat</code></li></ul><h3 id="Dependent-Typing"><a href="#Dependent-Typing" class="headerlink" title="Dependent Typing"></a>Dependent Typing</h3><p>Sometimes, the Type returned by a Function depends on the Value of its Argument. This is known as Dependent Typing. </p><p>For example, a function <code>if</code> takes three arguments, with <code>if true b c</code> returning <code>b</code>, and  <code>if false b c</code> returning <code>c</code>. If <code>b</code> and <code>c</code> have different Types, then the type of <code>if</code> depends on the value of <code>a</code>.</p><p>Dependent Typing is a reasonably complicated subject that is an active domain of research.</p><h3 id="Zero-Type-Unit-Type-and-Universal-Type"><a href="#Zero-Type-Unit-Type-and-Universal-Type" class="headerlink" title="Zero Type, Unit Type, and Universal Type"></a>Zero Type, Unit Type, and Universal Type</h3><h4 id="Zero-Type"><a href="#Zero-Type" class="headerlink" title="Zero Type"></a>Zero Type</h4><p>In some programming languages, there is a <strong>Zero Type</strong> or <strong>Bottom Type</strong> - a Type whose Set of Terms is the empty set and a Subtype of all other Types.</p><p>In these programming languages, denoting the Zero Type as a Function’s Return Type frequently indicates that <strong>the Function never returns (never completes computation) - instead, it may loop forever, throw an exception, or terminate the process</strong>.</p><p>As a real-world example, in Rust, the Zero Type is called the Never Type and is denoted by !. It is the kind of calculation that never returns any result. For example, the exit function <code>fn exit(code: i32) -&gt; !</code> terminates the process without returning.</p><h4 id="Unit-Type"><a href="#Unit-Type" class="headerlink" title="Unit Type"></a>Unit Type</h4><p>In some programming languages, the <strong>Unit Type</strong> is a Type whose Set of Terms is a singleton set, i.e., the type allows only one value. <strong>It is typically used to describe the Argument Type of a Function that doesn’t need arguments or the Return Type of a Function whose only goal is to have a side effect.</strong> For example:</p><ul><li>In Haskell, Rust, and Elm, the Unit Type is the Type of the 0-tuple <code>()</code>.</li><li>In Python, the Unit Type is <code>NoneType</code>, which only has a single instance <code>None</code>.</li><li>In JavaScript, both <code>Null</code> (which only has a single instance <code>null</code>) and <code>Undefined</code> (which only has a single instance <code>undefined</code>) are Unit Types.</li></ul><p>In languages such as C, C++, Java, and C#, <code>void</code>, which designates that a Function accepts no Arguments or does not return anything, plays a similar role to the Unit Type. However, there are also key differences:</p><ul><li>There are no Terms (Instances) of <code>void</code>.</li><li>A proper Unit Type may always be the Type of an Argument to a Function, but <code>void</code> cannot be the Type of an Argument.</li></ul><h4 id="Universal-Type"><a href="#Universal-Type" class="headerlink" title="Universal Type"></a>Universal Type</h4><p>Most object-oriented programming languages include a universal base class. In Type Theory, this is known as a <strong>Universal Type</strong> or a <strong>Top Type</strong>. Its Set of Terms encompasses any valid Term in the programming language, and all other types in the programming language are subtypes. For example:</p><ul><li><code>Object</code> in Smalltalk and JavaScript</li><li><code>java.lang.Object</code> in Java</li><li><code>System.Object</code> in C#, Visual Basic .NET, and other .NET Framework languages</li><li><code>object</code> in Python (can also be type-annotated as <code>typing.Any</code>)</li><li><code>Any</code> in Scala and Julia</li></ul><p>Some object-oriented programming languages, such as C++, Objective-C, and Swift, do not have a universal base class. In these languages, some constructs function similarly to the Universal Type.</p><ul><li>In C++, <code>void *</code> can accept any non-function pointer (even though <code>void</code> itself is more akin to the Unit Type).</li><li>In Objective-C, <code>id</code> can accept pointers to any object.</li><li>In Swift, the protocol <code>Any</code> can accept any type.</li></ul><p>Languages that are not object-oriented usually do not have a Universal Type.</p><h3 id="Typing-Context"><a href="#Typing-Context" class="headerlink" title="Typing Context"></a>Typing Context</h3><p>A Typing Context (or Typing Environment) $\Gamma$ is a Mapping from Terms to Types (or a collection of Term - Type Pairs). The judgement $\Gamma \vdash e: \tau$ is read as “$e$ has type $\tau$ in Context $\Gamma$”.</p><p>In Statically Typed Programming Languages, these Typing Contexts are used and maintained by Typing Rules to Type Check a given Program or Expression.</p><h3 id="Type-Inhabitation"><a href="#Type-Inhabitation" class="headerlink" title="Type Inhabitation"></a>Type Inhabitation</h3><p>Given a Typing Environment, a Type is <strong>inhabitated</strong> if an existing Term of the Type is available or a Term of the Type can be readily obtained (i.e., via Function Application).</p><h3 id="Derived-Forms"><a href="#Derived-Forms" class="headerlink" title="Derived Forms"></a>Derived Forms</h3><p>In Type Theory, Syntactic Sugar is known as <strong>Derived Forms</strong>, while replacing a Derived Form with its lower-level definition (usually during compile time) is known as <strong>desugaring</strong>. For example:</p><ul><li>In C, <code>a[i]</code> and <code>*(a + 1)</code>, <code>a-&gt;x</code> and <code>(*a).x</code>.</li><li>In the tidyverse collection of R packages, <code>x %&gt;% f(y)</code> is equivalent to <code>f(x, y)</code>.</li></ul><p>A programming language is typically divided into a compact core language, <strong>a rich set of syntax defined in terms of that core (Derived Forms)</strong>, and a comprehensive standard library. This makes the language maintainable for engineers while making it convenient for users.</p><h3 id="Type-Ascription"><a href="#Type-Ascription" class="headerlink" title="Type Ascription"></a>Type Ascription</h3><p><strong>Type Ascription</strong> is an assertion within source code that a term has a particular type. This can lead to cleaner, easier-to-understand code documentation. </p><h2 id="Important-Derived-Forms"><a href="#Important-Derived-Forms" class="headerlink" title="Important Derived Forms"></a>Important Derived Forms</h2><ul><li>Tuple</li><li>Record (Struct, Rows in a Database) - a collection of Fields, possibly of different Types</li><li>Variant (Datatype, Tagged Union, Discriminated Union, Disjoint Union)<ul><li>A data structure to hold a Term that could take on “several different, but fixed Types.”</li><li>Contains a Value field and a Tag field</li><li>Widely used for defining recursive data structures (e.g. Trees containing Leaves and Internal Nodes)</li></ul></li><li>List</li></ul><h2 id="Curry-Howard-Correspondence"><a href="#Curry-Howard-Correspondence" class="headerlink" title="Curry-Howard Correspondence"></a>Curry-Howard Correspondence</h2><p>The Curry-Howard Correspondence, independently discovered by logicians Haskell Curry in 1958 and William Howard in 1969, states that “proofs in a given subset of mathematics are exactly programs from a particular programming language”. Specifically,</p><ul><li>Types correspond to logical formulas.<ul><li>A Term having a Type can be understood as evidence that the Type is inhabited. For example, <code>3110: int</code> is evidence that <code>int</code> is inhabited.</li><li>Logical Atoms $a$, $b$ correspond to whether Types <code>A</code>, <code>B</code> are inhabited.<ul><li><code>true</code> corresponds to a Type that is always inhabited. The simplest of them all is the Unit Type.</li><li><code>false</code> corresponds to a Type that is never inhabited - the Zero Type.</li></ul></li><li>Conjunction $a \land b$ corresponds to a Type inhabited when both Types <code>A</code> and <code>B</code> are inhabited - <code>Tuple[A, B]</code>.</li><li>Disjunction $a \lor b$ with the added condition that <strong>you know which one of $a$, $b$ is true when $a \lor b$ is true</strong> corresponds to a Type that is inhabited when one of <code>A</code>, <code>B</code> is inhabited, and you know which one is inhabited - <code>Variant[A, B]</code>.</li><li>Implication $a \rightarrow b$ corresponds to a Type that, when inhibited, ensures <code>B</code> must be inhabited when <code>A</code> is inhabited - a Function Type, <code>A -&gt; B</code>.</li></ul></li><li>Programs correspond to proofs.</li><li>Analyzing the types of expressions evaluated during the execution of a program corresponds to simplifying a proof.</li></ul><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://en.wikipedia.org/wiki/Type_theory">https://en.wikipedia.org/wiki/Type_theory</a></li><li><a href="https://en.wikipedia.org/wiki/Bottom_type">https://en.wikipedia.org/wiki/Bottom_type</a></li><li><a href="https://en.wikipedia.org/wiki/Typing_environment">https://en.wikipedia.org/wiki/Typing_environment</a></li><li><a href="https://softwareengineering.stackexchange.com/questions/277197/is-there-a-reason-to-have-a-bottom-type-in-a-programming-language">https://softwareengineering.stackexchange.com/questions/277197/is-there-a-reason-to-have-a-bottom-type-in-a-programming-language</a></li><li><a href="https://stackoverflow.com/questions/32505911/what-is-the-role-of-bottom-%E2%8A%A5-in-haskell-function-definitions">https://stackoverflow.com/questions/32505911/what-is-the-role-of-bottom-%E2%8A%A5-in-haskell-function-definitions</a></li><li><a href="https://doc.rust-lang.org/std/primitive.never.html">https://doc.rust-lang.org/std/primitive.never.html</a></li><li><a href="https://en.wikipedia.org/wiki/Unit_type">https://en.wikipedia.org/wiki/Unit_type</a></li><li><a href="https://en.wikipedia.org/wiki/Top_type">https://en.wikipedia.org/wiki/Top_type</a></li><li><a href="https://cs3110.github.io/textbook/chapters/adv/curry-howard.html#types-correspond-to-propositions">https://cs3110.github.io/textbook/chapters/adv/curry-howard.html#types-correspond-to-propositions</a></li><li><a href="https://wiki.haskell.org/Curry-Howard-Lambek_correspondence">https://wiki.haskell.org/Curry-Howard-Lambek_correspondence</a></li><li><a href="https://www.pédrot.fr/slides/inria-junior-02-15.pdf">https://www.pédrot.fr/slides/inria-junior-02-15.pdf</a></li><li><a href="https://math.stackexchange.com/questions/2686280/what-do-logicians-mean-by-type">https://math.stackexchange.com/questions/2686280/what-do-logicians-mean-by-type</a></li><li><a href="https://homepages.inf.ed.ac.uk/stg/NOTES/node35.html">https://homepages.inf.ed.ac.uk/stg/NOTES/node35.html</a></li><li><a href="https://cs.wellesley.edu/~cs251/s02/scheme-intro.pdf">https://cs.wellesley.edu/~cs251/s02/scheme-intro.pdf</a></li><li><a href="https://cs.brown.edu/~sk/Publications/Papers/Published/pk-resuarging-types/paper.pdf">https://cs.brown.edu/~sk/Publications/Papers/Published/pk-resuarging-types/paper.pdf</a></li><li><a href="https://en.wikipedia.org/wiki/Syntactic_sugar">https://en.wikipedia.org/wiki/Syntactic_sugar</a></li><li><a href="https://www.wikidata.org/wiki/Q73072308">https://www.wikidata.org/wiki/Q73072308</a></li><li><a href="https://stackoverflow.com/questions/36389974/what-is-type-ascription">https://stackoverflow.com/questions/36389974/what-is-type-ascription</a></li><li><a href="https://github.com/rust-lang/rfcs/blob/master/text/0803-type-ascription.md">https://github.com/rust-lang/rfcs/blob/master/text/0803-type-ascription.md</a></li><li><a href="https://medium.com/@andrew_lucker/things-you-cant-do-in-rust-type-ascription-5253951c7427">https://medium.com/@andrew_lucker/things-you-cant-do-in-rust-type-ascription-5253951c7427</a></li><li><a href="https://docs.scala-lang.org/style/types.html">https://docs.scala-lang.org/style/types.html</a></li><li><a href="https://futhark-lang.org/examples/type-ascriptions.html">https://futhark-lang.org/examples/type-ascriptions.html</a></li><li><a href="https://en.wikipedia.org/wiki/Record_(computer_science)">https://en.wikipedia.org/wiki/Record_(computer_science)</a></li><li><a href="https://en.m.wikipedia.org/wiki/List_(abstract_data_type)">https://en.m.wikipedia.org/wiki/List_(abstract_data_type)</a></li></ul><h1 id="Feedback-from-the-Class-Discussion"><a href="#Feedback-from-the-Class-Discussion" class="headerlink" title="Feedback from the Class Discussion"></a>Feedback from the Class Discussion</h1><p>An Introduction Rule describes how Elements of the Type can be Created, and is akin to a description of a Constructor. Similarly, an Elimination Rule describes how Elements of the Type can be used in an Expression, and is akin to a description of an Overloaded Operator.</p><p>A lot of papers propose Typing Rules that don’t make much sense in isolation, but can be plugged into other Type Systems to add a Feature (i.e., allow the non-intrusive addition of other Typing Rules).</p><p>Well-designed Type Systems provide guarantees on a program’s behavior (i.e., guarantee predictable runtime behavior).</p><p>C introduced types, not for verification, but to determine how much space a variable would take up in memory.</p><p>Uniqueness of Typing (i.e., a Term can only have one Type) doesn’t hold when there is Subtyping.</p><p>Curry Style allows representing errors explicitly and describing the type of errors, which is suitable for languages where things can go wrong. In comparision, Church Style does not allow errors</p><p>The Erasure Property is built upon the assumption that the Execution of the Program doesn’t rely on Types.</p><p>Type Ascription woule be beneficial for giving hints to the Type Inference&#x2F;Type Checking Algorithm.</p><p>Usually, Desugaring happens before Type Checking, as the Type System does not directly handle the Syntactic Sugar. </p><p>Tuples are also called Sum Types, and Variants are also called Product Types. This is based on how many possible values the Tuple or Variant Type has. For example, <code>std::pair&lt;char, bool&gt;</code> has <code>256 * 2 = 512</code> values, <code>std::variant&lt;char, bool&gt;</code> has <code>256 + 2 = 258</code> values, and <code>std::optional&lt;char&gt;</code> has <code>256 + 1 = 257</code> values.</p><p>Enums can be seen as Variants where each value is associated with the Unit Type.</p><p>Tuples and Records are distinct Types because Compilers implement them differently</p><p>Programming in Dynamically Typed Programming is akin to programming with variables which are Variants of all possible types.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Summary&quot;&gt;&lt;a href=&quot;#Summary&quot; class=&quot;headerlink&quot; title=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h1&gt;&lt;p&gt;Chapter 9 of “Types and Programming Languages” pre</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Type Systems" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Type-Systems/"/>
    
    
  </entry>
  
  <entry>
    <title>Modules Within PySide6 for Cross-platform GUI Building and System API Calling</title>
    <link href="https://abbaswu.github.io/2023/01/02/Modules-Within-PySide6-for-Cross-platform-GUI-Building-and-System-API-Calling/"/>
    <id>https://abbaswu.github.io/2023/01/02/Modules-Within-PySide6-for-Cross-platform-GUI-Building-and-System-API-Calling/</id>
    <published>2023-01-02T08:00:00.000Z</published>
    <updated>2023-01-03T04:53:45.957Z</updated>
    
    <content type="html"><![CDATA[<h1 id="A-Brief-Introduction-to-Qt"><a href="#A-Brief-Introduction-to-Qt" class="headerlink" title="A Brief Introduction to Qt"></a>A Brief Introduction to Qt</h1><p>Qt is a C++ library with <a href="https://www.qt.io/qt-for-python">official Python bindings</a> that allows creating GUIs and cross-platform applications targeting different software and hardware platforms, such as Linux, Windows, macOS, Android, or embedded systems, with little to no change to the underlying codebase, while still having native capabilities, speed, and “look and feel”.</p><p>There are several advantages of using Qt, including:</p><ul><li>Well-designed object-oriented framework.</li><li>Excellent documentation.</li><li>Large user base.</li><li>Widely endorsed. Many industrial-grade cross-platform software use Qt, including Autodesk Maya, Autodesk 3ds Max, Google Earth, Mathematica, OBS Studio, QGIS, Sibelius, Teamviewer, VirtualBox, VLC media player, Wireshark, and WPS Office.</li></ul><h1 id="Modules-Within-PySide6"><a href="#Modules-Within-PySide6" class="headerlink" title="Modules Within PySide6"></a>Modules Within PySide6</h1><p>To aid use, we have summarized the relevant modules of <a href="https://www.qt.io/qt-for-python">PySide6</a>, Qt’s official Python bindings.</p><ul><li><code>PySide6.QtCore</code>: Qt’s essential classes, including platform-independent command-line parsing, multithreading, date and time utilities, object serialization, etc. <strong>Most of these features have already been introduced into the C++ and Python standard libraries.</strong> However, we should pay attention to <strong>Qt’s event handling mechanism</strong> - a mechanism for emitting events in the form of objects across threads (known as signals), and handling these events in designated functions (known as slots).</li></ul><h2 id="Modules-Related-to-Building-GUIs"><a href="#Modules-Related-to-Building-GUIs" class="headerlink" title="Modules Related to Building GUIs"></a>Modules Related to Building GUIs</h2><p>The modules of PySide6 directly related to building GUIs are as follows:</p><ul><li><code>PySide6.QtGui</code>: Classes used internally by Qt’s user interface technologies, including classes for windowing system integration, event handling, OpenGL and OpenGL ES integration, 2D graphics, basic imaging, fonts, and text.</li><li><code>PySide6.QtWidgets</code>: <strong>Provides a set of UI elements to create classic desktop-style user interfaces. All UI elements, including user-defined ones, inherit from <code>PySide6.QtWidgets.QtWidget</code>.</strong></li><li><code>PySide6.QtMultimediaWidgets</code>: Provides multimedia-related widgets and controls.</li><li><code>PySide6.QtOpenGL</code>, <code>PySide6.QtOpenGLWidgets</code>: Used to support the OpenGL widget class, which operates similarly to other Qt widgets with the exception that it opens an OpenGL display buffer whose contents can be rendered using the OpenGL API.</li><li><code>PySide6.QtPdf</code>, <code>PySide6.QtPdfWidgets</code>: Classes for rendering pages from PDF documents.</li><li><code>PySide6.QtWebEngineCore</code>, <code>PySide6.QtWebEngineWidgets</code>: Provides a Chromium web browser engine as well as C++ classes to render web content and interact with it.</li></ul><h2 id="Modules-Related-to-System-API-Calling"><a href="#Modules-Related-to-System-API-Calling" class="headerlink" title="Modules Related to System API Calling"></a>Modules Related to System API Calling</h2><p>Qt is more than a GUI framework. It also provides a cross-platform way of doing a lot of stuff that desktop applications often need to do - calling into system APIs, especially platform-specific multimedia APIs not covered by the POSIX standard and&#x2F;or the C++ and Python standard libraries.</p><p><img src="https://cdn.vectorstock.com/i/1000x1000/31/10/multimedia-design-vector-4393110.webp" alt="Stock Image: Multimedia"></p><p>To better document this crucial yet often overlooked use case, we have summarized the relevant modules of PySide6.</p><ul><li><code>PySide6.QtBluetooth</code>: Enables connectivity between Bluetooth enabled devices. Currently the API is supported to different degrees on Android, iOS, macOS, Linux, and Windows.</li><li><code>PySide6.QtMultimedia</code>: Provides APIs for rendering audio and video files on screen and playing them back, as well as a thorough API for recording audio and video via system cameras and microphones.</li><li><code>PySide6.QtNfc</code>: Provides APIs for dealing with NFC Forum Tags and NFC Forum Devices, including target identification and loss, the registration of NDEF message handlers, the reading and writing of NDEF messages on NFC Forum Tags, and the sending of tag-specific commands.</li><li><code>PySide6.QtPositioning</code>: Allows developers to locate themselves using a variety of sources, such as satellite, wifi, text files, and so on. The position on a map, for instance, can be determined using that information. Additionally, it is possible to retrieve satellite data and carry out area-based monitoring. Currently the API is supported on Android, iOS, macOS, Linux, and Windows (with GPS receivers exposed as a serial port providing NMEA sentences or using Windows.Devices.Geolocation).</li><li><code>PySide6.QtPrintSupport</code>: Offers broad cross-platform printing capability, including printing to attached printers, printing to remote printers over networks, and creating PDF files.</li><li><code>PySide6.QtSensors</code>: Provides access to sensor hardware. Currently the API is supported on Android, iOS, and Windows (MSVC).</li></ul><p>References:</p><ul><li><a href="https://en.wikipedia.org/wiki/Qt_(software)">https://en.wikipedia.org/wiki/Qt_(software)</a></li><li><a href="https://www.quora.com/What-are-the-Pros-and-Cons-of-using-QT-framework-for-cross-platform-programming-Win-Mac">https://www.quora.com/What-are-the-Pros-and-Cons-of-using-QT-framework-for-cross-platform-programming-Win-Mac</a></li><li><a href="https://wiki.qt.io/Qt_for_Python">https://wiki.qt.io/Qt_for_Python</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;A-Brief-Introduction-to-Qt&quot;&gt;&lt;a href=&quot;#A-Brief-Introduction-to-Qt&quot; class=&quot;headerlink&quot; title=&quot;A Brief Introduction to Qt&quot;&gt;&lt;/a&gt;A Brief </summary>
      
    
    
    
    <category term="Code" scheme="https://abbaswu.github.io/categories/Code/"/>
    
    <category term="Python" scheme="https://abbaswu.github.io/categories/Code/Python/"/>
    
    <category term="PySide6" scheme="https://abbaswu.github.io/categories/Code/Python/PySide6/"/>
    
    
  </entry>
  
  <entry>
    <title>Date and Time Types in Python</title>
    <link href="https://abbaswu.github.io/2022/12/31/Date-and-Time-Types-in-Python/"/>
    <id>https://abbaswu.github.io/2022/12/31/Date-and-Time-Types-in-Python/</id>
    <published>2022-12-31T08:00:00.000Z</published>
    <updated>2022-12-31T16:32:37.116Z</updated>
    
    <content type="html"><![CDATA[<p>There are many types in Python which can store date and time information. These types can be broadly divided into two categories:</p><h1 id="JSON-Serializable-Formats"><a href="#JSON-Serializable-Formats" class="headerlink" title="JSON Serializable Formats"></a>JSON Serializable Formats</h1><ul><li>UNIX Timestamp (e.g. <code>0</code>)</li><li>ISO 8601 String (e.g. <code>&#39;1970-01-01T00:00:00&#39;</code>)</li></ul><p>UNIX Timestamp has its roots in the system time of Unix operating systems. It is now widely used in databases, programming languages, file systems, and other computer operating systems. It counts the number of seconds that have passed since the Unix epoch began on January 1, 1970 at 00:00:00 UTC, minus any modifications made for leap seconds.</p><p>ISO 8601 is an international standard for the transmission and interchange of time- and date-related information on a global scale. Dates in the Gregorian calendar, hours based on the 24-hour timekeeping system, with an optional UTC offset, time intervals, and combinations of these are covered by ISO 8601. The standard offers a clear, unambiguous manner of expressing calendar dates and times in international communications, notably to prevent numeric dates and times from being misinterpreted when such data is sent between nations.</p><p>As the categorization suggests, these formats can be used in JSON serialization, and are widely adopted in data exchange formats and APIs. For example, Stripe APIs use UNIX Timestamps, while Twitter and Dropbox APIs use ISO 8601 Strings. UNIX Timestamps are easier and more efficient to handle, while ISO 8601 Strings have the virtue of being human-readable.</p><h1 id="Widely-Used-In-Memory-Data-Structures"><a href="#Widely-Used-In-Memory-Data-Structures" class="headerlink" title="Widely Used In Memory Data Structures"></a>Widely Used In Memory Data Structures</h1><ul><li><code>datetime.datetime</code> (e.g. <code>datetime.datetime(1970, 1, 1, 0, 0)</code>)</li><li><code>datetime.date</code> (e.g. <code>datetime.date(1970, 1, 1)</code>)</li><li><code>pandas.Timestamp</code> (e.g. <code>Timestamp(&#39;1970-01-01 00:00:00&#39;)</code>)</li></ul><p>As the categorization suggests, these formats are in-memory, structured representations of date and time information.</p><p><code>datetime.datetime</code> and <code>datetime.date</code> are types implemented (and widely used) in the Python Standard Library. <code>datetime.date</code> represents a date (year, month, day) in an idealized calendar, which is the existing Gregorian calendar infinitely stretched in both directions, while <code>datetime.datetime</code> also combines the data from a time object (hour, minute, second, microsecond).</p><p><code>pandas.Timestamp</code> is implemented in <code>pandas</code>. It is the <code>pandas</code> replacement for <code>datetime.datetime</code>, and is the type used for the entries that make up a <code>pandas.DatetimeIndex</code>, and other time series-oriented data structures in <code>pandas</code>. Furthermore, it is also widely used across the Python Ecosystem for Data Science, such as being used by <code>matplotlib</code> as the <code>xticks</code> for plotting a <code>pandas.Series</code> with a <code>pandas.DatetimeIndex</code>, as shown below.</p><p><img src="https://i.stack.imgur.com/gLpr4.png" alt="`pandas.Timestamp` is the type used for the entries that make up a `pandas.DatetimeIndex`, and is used by `matplotlib` as the `xticks` for plotting a `pandas.Series` with a `pandas.DatetimeIndex`"></p><h1 id="Converting-Between-These-Types"><a href="#Converting-Between-These-Types" class="headerlink" title="Converting Between These Types"></a>Converting Between These Types</h1><p>With so many types in Python which can store date and time information, it is important to know how to convert between them. The following State Diagram depicts how we should perform the conversions.</p><pre><code class=" mermaid">stateDiagram    state &quot;UNIX Timestamp&quot; as UNIXTimestamp: 0    state &quot;ISO 8601 String&quot; as ISO8601String: &#x27;1970-01-01T00:00:00&#x27;    state &quot;datetime.datetime&quot; as DatetimeDatetime: datetime.datetime(1970, 1, 1, 0, 0)    state &quot;datetime.date&quot; as DatetimeDate: datetime.date(1970, 1, 1)    state &quot;pandas.Timestamp&quot; as PandasTimestamp: Timestamp(&#x27;1970-01-01 00:00:00&#x27;)      UNIXTimestamp --&gt; DatetimeDatetime: datetime.datetime.fromtimestamp function    UNIXTimestamp --&gt; PandasTimestamp: constructor    ISO8601String --&gt; DatetimeDatetime: isoformat method    ISO8601String --&gt; PandasTimestamp: constructor    DatetimeDatetime --&gt; UNIXTimestamp: datetime.datetime.timestamp function    DatetimeDatetime --&gt; ISO8601String: datetime.datetime.fromiso function    DatetimeDatetime --&gt; DatetimeDate: date method    DatetimeDatetime --&gt; PandasTimestamp: constructor    DatetimeDate --&gt; PandasTimestamp: pandas.Timestamp constructor    PandasTimestamp --&gt; UNIXTimestamp: timestamp method    PandasTimestamp --&gt; ISO8601String: isoformat method    PandasTimestamp --&gt; DatetimeDatetime: to_pydatetime method</code></pre><p>References:</p><ul><li><a href="https://en.wikipedia.org/wiki/Unix_time">https://en.wikipedia.org/wiki/Unix_time</a></li><li><a href="https://en.wikipedia.org/wiki/ISO_8601">https://en.wikipedia.org/wiki/ISO_8601</a></li><li><a href="https://dev.to/xngwng/do-you-prefer-unix-epoch-a-number-or-iso-8601-a-string-for-timestamps--28ll">https://dev.to/xngwng/do-you-prefer-unix-epoch-a-number-or-iso-8601-a-string-for-timestamps--28ll</a></li><li><a href="https://stackoverflow.com/questions/15554586/timestamps-iso8601-vs-unix-timestamp">https://stackoverflow.com/questions/15554586/timestamps-iso8601-vs-unix-timestamp</a></li><li><a href="https://www.dataquest.io/blog/tutorial-time-series-analysis-with-pandas/">https://www.dataquest.io/blog/tutorial-time-series-analysis-with-pandas/</a></li><li><a href="https://www.programiz.com/python-programming/datetime/timestamp-datetime">https://www.programiz.com/python-programming/datetime/timestamp-datetime</a></li><li><a href="https://stackoverflow.com/questions/3743222/how-do-i-convert-a-datetime-to-date">https://stackoverflow.com/questions/3743222/how-do-i-convert-a-datetime-to-date</a></li><li><a href="https://stackoverflow.com/questions/969285/how-do-i-translate-an-iso-8601-datetime-string-into-a-python-datetime-object">https://stackoverflow.com/questions/969285/how-do-i-translate-an-iso-8601-datetime-string-into-a-python-datetime-object</a></li><li><a href="https://www.programiz.com/python-programming/datetime/timestamp-datetime">https://www.programiz.com/python-programming/datetime/timestamp-datetime</a></li><li><a href="https://pynative.com/python-iso-8601-datetime/">https://pynative.com/python-iso-8601-datetime/</a></li><li><a href="https://docs.python.org/3/library/datetime.html">https://docs.python.org/3/library/datetime.html</a></li><li><a href="https://stackoverflow.com/questions/1937622/convert-date-to-datetime-in-python">https://stackoverflow.com/questions/1937622/convert-date-to-datetime-in-python</a></li><li><a href="https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.html">https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.html</a></li><li><a href="https://stackoverflow.com/questions/993358/creating-a-range-of-dates-in-python">https://stackoverflow.com/questions/993358/creating-a-range-of-dates-in-python</a></li><li><a href="https://stackoverflow.com/questions/41046630/set-time-formatting-on-a-datetime-index-when-plotting-pandas-series">https://stackoverflow.com/questions/41046630/set-time-formatting-on-a-datetime-index-when-plotting-pandas-series</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;There are many types in Python which can store date and time information. These types can be broadly divided into two categories:&lt;/p&gt;
&lt;h1</summary>
      
    
    
    
    <category term="Code" scheme="https://abbaswu.github.io/categories/Code/"/>
    
    <category term="Python" scheme="https://abbaswu.github.io/categories/Code/Python/"/>
    
    
  </entry>
  
  <entry>
    <title>Social Media Strategy (tentative)</title>
    <link href="https://abbaswu.github.io/2022/12/31/Social-Media-Strategy-tentative/"/>
    <id>https://abbaswu.github.io/2022/12/31/Social-Media-Strategy-tentative/</id>
    <published>2022-12-31T08:00:00.000Z</published>
    <updated>2022-12-31T19:34:02.650Z</updated>
    
    <content type="html"><![CDATA[<p>Social media accounts are windows that exhibit our image to the public, and we must pay attention to them. However, on the one hand, the use of social media should complement, and not negatively affect, our routine work, study, and life patterns; on the other hand, different social media platforms generally differ in terms of appropriate content to display. After a period of observation and reflection, we have developed the following social media strategy to address these issues, as depicted in the Bipartite Graph below.</p><pre><code class=" mermaid">stateDiagramstate &quot;Life Moments&quot; as LifeMomentsstate &quot;Reflections on Life&quot; as ReflectionsOnLifestate &quot;Work Moments&quot; as WorkMomentsstate &quot;Reflections on Work&quot; as ReflectionsOnWorkstate &quot;Reflections on Development&quot; as ReflectionsOnDevelopmentstate &quot;Detailed Explanations&quot; as DetailedExplanationsstate &quot;Planning&quot; as Planningstate &quot;Instagram&quot; as Instagramstate &quot;小红书&quot; as XiaoHongShustate &quot;WeChat&quot; as WeChatstate &quot;QQ&quot; as QQstate &quot;LinkedIn&quot; as LinkedInstate &quot;Blog&quot; as Blog    LifeMoments --&gt; Instagram    LifeMoments --&gt; XiaoHongShu    LifeMoments --&gt; WeChat    LifeMoments --&gt; QQ        ReflectionsOnLife --&gt; XiaoHongShu    ReflectionsOnLife --&gt; Twitter    ReflectionsOnLife --&gt; WeChat    ReflectionsOnLife --&gt; QQ    WorkMoments --&gt; Twitter    WorkMoments --&gt; WeChat    WorkMoments --&gt; QQ    ReflectionsOnWork --&gt; Twitter    ReflectionsOnWork --&gt; WeChat    ReflectionsOnWork --&gt; QQ    ReflectionsOnDevelopment --&gt; LinkedIn        DetailedExplanations --&gt; Blog        Planning --&gt; Blog</code></pre><p>In addition, a pain point we will encounter is that we will post some content to both Chinese and English social media platforms. To overcome this problem, we can first write a Chinese (or English) version and use automated tools such as Google Translate and DeepL before manually touching up the machine-translated version.</p><p>Furthermore, to boost the following of our social media accounts, when we need to share the content posted on social media with others via private chat, we can share the link of the content posted to social media instead of copying and pasting the content itself.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Social media accounts are windows that exhibit our image to the public, and we must pay attention to them. However, on the one hand, the </summary>
      
    
    
    
    <category term="Planning" scheme="https://abbaswu.github.io/categories/Planning/"/>
    
    
  </entry>
  
  <entry>
    <title>Command-line HTTP Servers for Rapid File Sharing</title>
    <link href="https://abbaswu.github.io/2022/12/26/Command-line-HTTP-Servers-for-Rapid-File-Sharing/"/>
    <id>https://abbaswu.github.io/2022/12/26/Command-line-HTTP-Servers-for-Rapid-File-Sharing/</id>
    <published>2022-12-26T08:00:00.000Z</published>
    <updated>2022-12-26T21:40:35.899Z</updated>
    
    <content type="html"><![CDATA[<p>Sometimes, we need an ad-hoc, quick-and-dirty way of sharing files with others while maintaining complete control of the data transmission.</p><ul><li>We should not store our data on any third-party servers.</li><li>The connections established through the network should be point-to-point.</li></ul><p>Being supported by virtually every Internet-capable device and from both command-line tools (such as wget and curl) and graphical Web browsers, the HTTP protocol is one of our best bets. Thus, we have compiled a list of command-line HTTP servers that enable rapid file sharing and compare their features.</p><h1 id="python3-m-http-server"><a href="#python3-m-http-server" class="headerlink" title="python3 -m http.server"></a><a href="https://docs.python.org/dev/library/http.server.html">python3 -m http.server</a></h1><p>The Python standard library has a barebones built-in HTTP server. Not recommended for production.</p><ul><li>Language: Python</li></ul><h1 id="mjpclab-x2F-go-http-file-server"><a href="#mjpclab-x2F-go-http-file-server" class="headerlink" title="mjpclab&#x2F;go-http-file-server"></a><a href="https://github.com/mjpclab/go-http-file-server">mjpclab&#x2F;go-http-file-server</a></h1><p>Simple command line based HTTP file server to share local file system.</p><ul><li>Features:<ul><li>Cross-Origin Resource Sharing (CORS)</li><li>Frontend Features:<ul><li>File Upload</li><li>File Delete</li><li>Create Subdirectory</li><li>Download the Current Directory as an Archive</li></ul></li><li>HTTP Basic Authentication</li><li>HTTP Range Requests</li><li>HTTP Strict Transport Security (HSTS)</li><li>HTTPS</li></ul></li><li>GitHub Stars: 175</li><li>Language: Go</li></ul><h1 id="mar10-x2F-wsgidav"><a href="#mar10-x2F-wsgidav" class="headerlink" title="mar10&#x2F;wsgidav"></a><a href="https://github.com/mar10/wsgidav">mar10&#x2F;wsgidav</a></h1><p>A generic and extendable WebDAV server written in Python and based on WSGI.</p><ul><li>Features:<ul><li>HTTP Range Requests</li></ul></li><li>GitHub Stars: 640</li><li>Language: Python</li><li>Multithreaded</li><li>WebDAV Server</li></ul><h1 id="TheWaWaR-x2F-simple-http-server"><a href="#TheWaWaR-x2F-simple-http-server" class="headerlink" title="TheWaWaR&#x2F;simple-http-server"></a><a href="https://github.com/TheWaWaR/simple-http-server">TheWaWaR&#x2F;simple-http-server</a></h1><p><img src="https://github.com/TheWaWaR/simple-http-server/raw/master/screenshot.png" alt="Screenshot"></p><ul><li>Features:<ul><li>Cross-Origin-Embedder-Policy (COEP)</li><li>Cross-Origin Resource Sharing (CORS) </li><li>Cross-Origin-Opener-Policy (COOP)</li><li>HTTP Basic Authentication</li><li>HTTP Range Requests</li><li>HTTPS</li><li>Frontend Features:<ul><li>File Upload</li></ul></li></ul></li><li>GitHub Stars: 785</li><li>Language: Rust</li><li>Multithreaded</li></ul><h1 id="http-party-x2F-http-server"><a href="#http-party-x2F-http-server" class="headerlink" title="http-party&#x2F;http-server"></a><a href="https://github.com/http-party/http-server">http-party&#x2F;http-server</a></h1><p><code>http-server</code> is a simple, zero-configuration command-line static HTTP server. It is powerful enough for production usage, but it’s simple and hackable enough to be used for testing, local development and learning.</p><ul><li>Features:<ul><li>Cross-Origin Resource Sharing (CORS)</li><li>HTTP Basic Authentication</li><li>HTTP Range Requests</li><li>HTTPS</li></ul></li><li>GitHub Stars: 12.4k</li><li>Language: node.js</li></ul><h1 id="EstebanBorai-x2F-http-server"><a href="#EstebanBorai-x2F-http-server" class="headerlink" title="EstebanBorai&#x2F;http-server"></a><a href="https://github.com/EstebanBorai/http-server">EstebanBorai&#x2F;http-server</a></h1><p>Simple and configurable command-line HTTP server</p><ul><li>Features:<ul><li>Cross-Origin Resource Sharing (CORS)</li><li>HTTP Basic Authentication</li><li>HTTPS</li><li>GZip Compression</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Sometimes, we need an ad-hoc, quick-and-dirty way of sharing files with others while maintaining complete control of the data transmissio</summary>
      
    
    
    
    <category term="Code" scheme="https://abbaswu.github.io/categories/Code/"/>
    
    <category term="Unix" scheme="https://abbaswu.github.io/categories/Code/Unix/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Efficient scalable thread-safety-violation detection: finding thousands of concurrency bugs during testing</title>
    <link href="https://abbaswu.github.io/2022/11/27/Paper-Review-Efficient-scalable-thread-safety-violation-detection-finding-thousands-of-concurrency-bugs-during-testing/"/>
    <id>https://abbaswu.github.io/2022/11/27/Paper-Review-Efficient-scalable-thread-safety-violation-detection-finding-thousands-of-concurrency-bugs-during-testing/</id>
    <published>2022-11-27T08:00:00.000Z</published>
    <updated>2022-12-19T18:38:47.736Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://dl.acm.org/doi/10.1145/3341301.3359638">here</a>.</p><p>This paper presents Thread Safety Violation Detection (TSVD), a tool that dynamically detects thread safety violations with low runtime overhead, and which is compatible with real-world, distributed-developed code employing different synchronization mechanisms. The tool frames thread safety violations as two methods, with one of them being a write operation, occurring concurrently. It infers thread safety violations using a very creative approach. First, it instruments the program and detects method calls that access objects behind thread-safety contracts. Later on, during the execution of the program, TSVD injects delays into threads with method calls accessing those objects and monitors whether another thread also accesses the same objects during the delay. As this may incur significant overhead, the tool uses two strategies to determine when to inject delays - keeping track of “near misses”, where the two method calls of two threads occur within a time threshold apart from each other, and inferring “happens before” relations, to rule out two accesses which are causally related.</p><p>The tool was tested on 43000 .NET programs in Microsoft teams, and its bug-finding capability outperformed both existing tools and configuring TSVD to emulate the strategies of existing tools, which shows the feasibility of TSVD.</p><p>There are two questions that come to mind after reading this paper:</p><ul><li>How does the tool acquire the information on which methods are thread-unsafe?</li><li>The approach the tool uses to infer thread safely - injecting delays and monitoring the behavior of other threads - sounds very interesting to me. Have there been any other applications of such an approach?</li><li>What is the sensitivity of the relevant parameters used in TSVD to its effectiveness and efficiency? Is there any guide on how to properly adjust these parameters?</li></ul><hr><p>Feedback from the Class Discussion</p><p>The proposed approach can handle different concurrency models, such as:</p><ul><li>async</li><li>task-based</li><li>thread-based</li></ul><p>But can it handle unstructured concurrency?</p><p>The approach generalizes data race for objects and data structures at the method-level (e.g. there cannot be two simultaneous calls to add() for a <code>List</code> class).</p><p>Using delays can handle many more cases than reasoning about thread scheduling. It is a “simple thing” which works for many cases (akin to fuzzing).</p><p>The approach requires manually specifying read and write APIs. Is it possible to create a semi-automatic approach starting from contracts labeled for standard library APIs?</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Hybrid dynamic data race detection</title>
    <link href="https://abbaswu.github.io/2022/11/23/Paper-Review-Hybrid-dynamic-data-race-detection/"/>
    <id>https://abbaswu.github.io/2022/11/23/Paper-Review-Hybrid-dynamic-data-race-detection/</id>
    <published>2022-11-23T08:00:00.000Z</published>
    <updated>2022-12-19T18:29:37.066Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://doi.org/10.1145/781498.781528">here</a>.</p><p>The paper proposes a hybrid approach to dynamically (at runtime) data races in multithreaded Java programs. It first proposes two specific detection approaches, each with its strengths and weaknesses. The first is lockset-based detection, which identifies a data race when multiple threads use a shared memory location without holding a shared lock object. Such an approach is fast but may lead to false positives. As a result, the paper proposes another approach, happens-before detection, which uses several heuristics to reason about relations between events and infer whether a potential race has occurred at a particular memory location. In comparison, this approach is more computationally expensive and may lead to false negatives. Considering that neither approach is sound, they combine the two approaches by first using lockset-based detection to identify potential data races before using happens-before detection to reason whether these are probable. The paper then conducts an experimental study of their hybrid approach on various Java programs, demonstrating its effectiveness and efficiency.</p><p>I like this paper’s idea of combining a pessimistic and optimistic approach when doing program analysis. Are there any other works that use such an idea?</p><p>However, I have a question concerning the applicability of the hybrid approach in real life. Although pessimistic, shouldn’t lockset-based detection be enough to stamp out all potential data races by providing programmers with feedback to add relevant locks to prevent such possible data races? This is relevant to the requirements for defensive programming. Or are there design patterns where multiple threads can safely use a shared memory location without holding a common lock and not lead to data races?</p><hr><p>Feedback from the Class Discussion</p><p>Difference Between Race Condition and Data Race:</p><ul><li>Race Condition: There are multiple threads, and the behavior of program depends on thread scheduling.</li><li>Data Race: Different from race condition. This frequently happens when you parallelize a program that shouldn’t be parallelized. Data race can be solved by using locks, but there may still be race coditions.</li></ul><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gams">Thread<span class="hljs-number">-1</span>:<br><br><span class="hljs-function"><span class="hljs-title">synchronized</span>(<span class="hljs-params">...</span>)</span> &#123;<br>    x = <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gams">Thread<span class="hljs-number">-2</span>:<br><br><span class="hljs-function"><span class="hljs-title">synchronized</span>(<span class="hljs-params">...</span>)</span>&#123;<br>    x = <span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Modelling in the Paper:</p><ul><li>Lamport Timestamps&#x2F;Vector Clocks</li><li>Thread events: statement executions in threads. A thread event is dependent on previous thread events. This is captured used using the happens-before formal definition in the paper, but leads to false negatives.</li><li>Thread communications: signals (enforce order) and locks (mutually exclusive).</li><li>Message send&#x2F;receive: enqueue and dequeue.</li></ul><p>Architecure-dependednt atomic operations can also be a lock-free solution (e.g. C++’s atomic).</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Lightweight Verification of Array Indexing</title>
    <link href="https://abbaswu.github.io/2022/11/16/Paper-Review-Lightweight-Verification-of-Array-Indexing/"/>
    <id>https://abbaswu.github.io/2022/11/16/Paper-Review-Lightweight-Verification-of-Array-Indexing/</id>
    <published>2022-11-16T08:00:00.000Z</published>
    <updated>2022-12-19T18:52:48.788Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://doi.org/10.1145/3213846.3213849">here</a>.</p><h1 id="Summary-of-the-Paper"><a href="#Summary-of-the-Paper" class="headerlink" title="Summary of the Paper"></a>Summary of the Paper</h1><p>The authors propose a methodology to detect out-of-bound array accesses statically. They first define that criteria that ideal techniques for detecting out-of-bound array accesses should satisfy, before analyzing the insufficiency of existing academic and industrial approaches, and presenting their own approach, Index Checker, implemented for Java.</p><p>Index Checker reduces checking array bonds to identifying 7 kinds of knowledge, which concern array index and array length, and form a hierarchy. It models such hierarchical knowledge as a Type System, requires the user to write “Type” Annotations at procedure boundaries, and verifies that values have the given “Type” at runtime. This is implemented using Checker Framework, an “industrial-strength, open-source tool for building Java type systems”.</p><p>The authors evaluate Index Checker on 3 large-scale, well-tested Java projects (Google Guava, JFreeChart, Plume-lib), and compare Index Checker with 3 other approaches (FindBugs, KeY, and Clousot), proving the effectiveness of Index Checker (scalability, finding bugs in well-tested programs, and low false positive rate). They also assess the burden of writing type annotations for Index Checker.</p><h1 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h1><ul><li>What is the rationale behind the 7 kinds of knowledge concerning array index and array length proposed in the paper?</li><li>I am not very familiar with Type Theory, which may have impeded my understanding of the value of the paper. What are the benefits of using Type Systems and Type Inference, and using Type Annotations to capture known constraints? Is it just to leverage the power of Checker Framework, an “industrial-strength, open-source tool for building Java type systems”, for sound inference? Or are there any further benefits?</li><li>No matter what the benefits are, from this paper, modeling hierarchical knowledge as a Type System, using Type Annotations to capture known constraints, and using Type Inference to verify such constraints sounds like a very innovative technique with many potential use cases. Have there been any other applications of such a technique?</li></ul><hr><h1 id="Feedback-from-the-Class-Discussion"><a href="#Feedback-from-the-Class-Discussion" class="headerlink" title="Feedback from the Class Discussion"></a>Feedback from the Class Discussion</h1><p>The hierarchy of knowledge is derived from Exploratory Data Analysis (trying stuff until it works, see Section 2.8).</p><p>“Subtype” is a kind of Comparable Partial Ordering (‘&lt;’). The Types in the Bottom have more information, while the Types in the Top have less information.</p><p>In Java, aside from Inheritance, another form of Subtyping is Function Subtyping. e.g. Comparator (to compare two Dog’s we can pass a function that compares two Animal’s) the inputs can be more general types.</p><p>Rules define what to do when a Pattern is encountered; however, it takes a (nontrivial) search to determine the order to apply the rules.</p><p>Fixed Point: Convergence of Information.</p><p>Reach a Fixed Point: Iterate until Convergence.</p><p>The Paper uses Subtyping to implement Widening.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Modular Checking for Buffer Overflows in the Large</title>
    <link href="https://abbaswu.github.io/2022/11/13/Paper-Review-Modular-Checking-for-Buffer-Overflows-in-the-Large/"/>
    <id>https://abbaswu.github.io/2022/11/13/Paper-Review-Modular-Checking-for-Buffer-Overflows-in-the-Large/</id>
    <published>2022-11-13T08:00:00.000Z</published>
    <updated>2022-12-18T22:20:14.437Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://doi.org/10.1145/1134285.1134319">here</a>.</p><h1 id="Background-Information"><a href="#Background-Information" class="headerlink" title="Background Information"></a>Background Information</h1><h2 id="Datalog"><a href="#Datalog" class="headerlink" title="Datalog"></a>Datalog</h2><ul><li>Declarative Programming Language which began as a Query Language for Relational Databases, and is now used in Data Integration, Information Extraction, Program Analysis, Cloud Computing, Machine Learning, etc.</li><li>Akin to SQL in many aspects.<ul><li>Not Turing Complete.</li><li>Used as a Domain Specific Language.</li><li>No Canonical Implementation, many different Implementations exist for different Applications (c.f. SQLite, MySQL, PostgreSQL, etc. for SQL).</li></ul></li><li>Follows the ‘Logic Programming’ Paradigm.<ul><li>A Program consists of Constants, Variables, Facts, and Rules (based on First Order Logic, in a form similar to “a new Fact A is true if B, C, and D are already known to be true”).</li><li>The Execution of a Program is <em>iteratively inferring new Facts given the Rules</em>.</li><li>Maps very nicely to many problems encountered during Program Analysis.</li></ul></li></ul><h1 id="Summary-of-the-Paper"><a href="#Summary-of-the-Paper" class="headerlink" title="Summary of the Paper"></a>Summary of the Paper</h1><p>The authors proposed a Methodology for detecting possible Buffer Overflow-based Security Exploits in C code and providing developers with instant feedback during the build process. The Methodology prefers usability over accuracy, and should be used alongside other tools in a Swiss Cheese Model against Security Exploits.</p><p>First, the authors proposed a Simple Annotations Language for annotating Pointers passed as parameters to and returned from Functions, to denote Preconditions and Postconditions of Function Execution. The authors propose that for new code, annotation should be inserted manually, and code should be fully annotated before being checked in to Version Control.</p><p>For legacy codebases and&#x2F;or third-party code without such Annotations, the authors propose an Inference Engline, SALInfer, which tries to infer such Annotations, preferring Coverage over Accuracy. SALInfer supports specifying Inference Algorithms using Datalog.</p><p>Finally, the authors propose a modular checker, ESPX, which tries to infer if a program is potentially vulnerable to Buffer Overflow-based Security Exploits by statically analyzing the annotations within the program’s code. The confidence of the inference results vary based on the extent and quality of the annotations.</p><h1 id="Questions-Regarding-the-Paper"><a href="#Questions-Regarding-the-Paper" class="headerlink" title="Questions Regarding the Paper"></a>Questions Regarding the Paper</h1><ul><li>What is the relevance of such a technique to “safe” programming languages that do not allow using overflowable buffers?</li><li>The authors state that “control over annotation insertion is given to individual developers”. However, developers might be reluctant to insert Annotations, and inserting Annotations can negatively affect developer productivity. Furthermore, the quality of the inserted Annotations is not guaranteed. Last but not least, inferring Annotations for legacy codebases and&#x2F;or third-party code without such Annotations prefers Coverage over Accuracy, which may not lead to sound results. Considering all these real concerns, the practical usability of this tool is seriously compromised.</li><li>The authors did an evaluation on an unnamed Microsoft product. With little information regarding the product being disclosed, such an evaluation is far from convincing, and I suspect that there might be manipulation of some kind within the evaluation.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Precise Interprocedural Dataflow Analysis via Graph Reachability</title>
    <link href="https://abbaswu.github.io/2022/11/07/Paper-Review-Precise-Interprocedural-Dataflow-Analysis-via-Graph-Reachability/"/>
    <id>https://abbaswu.github.io/2022/11/07/Paper-Review-Precise-Interprocedural-Dataflow-Analysis-via-Graph-Reachability/</id>
    <published>2022-11-07T08:00:00.000Z</published>
    <updated>2022-12-19T17:03:40.947Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://doi.org/10.1145/199448.199462">here</a>.</p><p>To be honest, I found the paper to be almost unreadable due to it being full of unfamiliar concepts and abstract formalizations. I tried my best to do some studying into the topic so that I can understand the problem that they are trying to solve, and important aspects of their algorithm, better.</p><h1 id="Graph-Reachability"><a href="#Graph-Reachability" class="headerlink" title="Graph Reachability"></a>Graph Reachability</h1><p>Graph Reachability means whether it is possible to get from one vertex to another vertex within a graph.</p><p>In an Undirected Graph $G(V, E)$, Graph Reachability between <em>one pair of nodes</em> can be calculated using Breadth-First Search, while Graph Reachability between <em>all pair of nodes</em> can be reduced to calculating the Connected Components of the Undirected Graph, which is an efficient algorithm with $O(|V| + |E|)$ time complexity.</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/3/38/Equivalentie.svg" alt="Connected Components within an Undirected Graph"></p><p>In a Directed Graph, Graph Reachability between <em>one pair of nodes</em> can also be calculated using Breadth-First Search. <strong>However, there is no efficient algorithm that can calculate Graph Reachability between <em>all pair of nodes</em> for all Directed Graphs.</strong></p><p>For <em>any</em> Directed Graph, calculating Graph Reachability between <em>all pair of nodes</em> can be reduced to calculating <strong>All Pairs Shortest Distance</strong> using the Floyd-Warshall Algorithm, which has an $O({|V|}^3)$ time complexity.</p><p>More efficient algorithms are only applicable to Planar Directed Graphs.</p><h1 id="Data-Flow-Analysis"><a href="#Data-Flow-Analysis" class="headerlink" title="Data Flow Analysis"></a>Data Flow Analysis</h1><p>Constant Propogation (determining whether variables at a given point in the program are guaranteed to have constant values) and Live Variable Analysis (determining at a given point in the program, which variables might be used before being overwritten) are two commonly encountered examples of Data Flow Analysis.</p><p>Given a program’s Control Flow Graph, Data Flow Analysis:</p><ul><li>Associates each Node of the Control Flow Graph with Information concerning the Variables within that Node (known as <em>Dataflow Fact</em>‘s, usually a Mapping between Variables and their Values or Properties)</li><li>Models the effect of executing a Node with a <em>Dataflow Function</em>.</li></ul><p>In most Data Flow Analysis problems, we take one of the following approaches to obtain the Dataflow Facts for each Node:</p><ul><li>Summarizing paths entering the Node from the Start, such as in Constant Propogation. Known as “Forward Problem”‘s.</li><li>Summarizing paths exiting the Node from the Exit, such as in Live Variable Analysis. Known as “Backward Problem”‘s.</li></ul><p>How we summarize paths is known as the <em>Confluence Operator</em>.</p><p>Data Flow Analysis problems can also be divided into “may” problems and “must” problems.</p><ul><li>In “may” problems, the Dataflow Facts for each Node include information about what may be true. An example is Live Variable Analysis, where we determine whether a variable <em>may</em> be used before being overwritten in a given point in the program.</li><li>In “must” problems, the Dataflow Facts for each Node include information about what must be true. An example is Constant Propogation, where we determine whether a variable <em>must</em> have a given value in a given point in the program.</li></ul><p>Many interesting Data Flow Analysis problems, such as Live Variable Analysis, can be modeled as GEN&#x2F;KILL problems, or bit-vector problems, in which:</p><ul><li>A set of variables, $KILL[n]$, is defined at Node $n$.</li><li>A set of variables, $GEN[n]$, is used at Node $n$.</li><li>We use Union or Intersection to summarize paths entering a Node to obtain the Dataflow Facts for the Node.</li></ul><h1 id="Interprocedural-Dataflow-Analysis"><a href="#Interprocedural-Dataflow-Analysis" class="headerlink" title="Interprocedural Dataflow Analysis"></a>Interprocedural Dataflow Analysis</h1><p>The goal of Interprocedural Dataflow Analysis is to capture an Abstraction of the Effect of calling a Procedure in Dataflow Analysis.</p><p>A naive approach to Interprocedural Dataflow Analysis is to reduce it to Intraprocedural Dataflow Analysis in some way.</p><ul><li>Procedure Inlining<ul><li>Exponentially increases the Control Flow Graph</li><li>Cannot handle recursion</li></ul></li><li>Context Sensitive Procedure Inlining<ul><li>Uses Context Information (often an Approximation of the Call Stack) to distinguish between different Calls of the same Procedure, and reduce the number of inlined Procedures.</li></ul></li></ul><hr><p>However, even after research, I have failed to understand the more complicated approaches (as well as the approaches proposed in this Paper).</p><p>I can only get the point that the author shows that many Interprocedural Dataflow Analysis problems, in which:</p><ul><li>A finite set of Dataflow Facts</li><li>Dataflow Functions distribute over the Confluence Operator (which I don’t fully understand)</li></ul><p>including GEN&#x2F;KILL problems, or bit-vector problems, can be reduced to a Graph Reachability Problem on a Directed Graph.</p><p>Furthermore, I believe the main contribution of this paper is theoretical, but what is its value in real-world Dataflow Analysis problems, especially considering that the Time Complexity of Graph Reachability Problems on Directed Graphs are high?</p><p>I honestly hope that I can get some insight into these approaches during our class on Monday. Thank you!</p><hr><h1 id="Feedback-from-the-Class-Discussion"><a href="#Feedback-from-the-Class-Discussion" class="headerlink" title="Feedback from the Class Discussion"></a>Feedback from the Class Discussion</h1><p>Some of the paper’s idea comes from Abstract Interpretation. It is nice theoretically, but it is far from implementation.</p><p>Graph Reachability in the context of Interprocedure Analysis is also known as Context-Free Language Reachability and Dyck Reachability.</p><p><strong>In the context of this paper, there are multiple Dataflow Functions, one for each Node in the Control Flow Graph. Given a Node in the Control Flow Graph, we use Pattern Matching to determine what its Dataflow Function is.</strong> Lambdas are used to represent these Dataflow Functions. Explanation for the notations: $\lambda <parameters>.&lt;return_value&gt;$ means <code>def f(&lt;parameters&gt;): return &lt;return_value&gt;</code>.</p><p>In the context of this paper, we require all Dataflow Functions to be distributive over the Meet Function (Confluence Function). This means that, given the Meet Function $\Pi$ and a Dataflow Function $f$, $f(X<del>\Pi</del>Y) &#x3D; f(X)<del>\Pi</del>f(Y)$ for any two Dataflow Facts $X, Y$. </p><p>Each Dataflow Function can be visualized using a Graph Representation. The Edges represent Dependencies between Facts of the Variables in the Old Dataflow Facts and Facts of the Variables in the New Dataflow Facts.</p><p><img src="https://picx1.zhimg.com/v2-f2b6351350543806f3a1b5f709071f78_1440w.jpg?source=172ae18b" alt="Graph Representation of Dataflow Functions, `x` is Shorthand for the Facts of `x`"></p><p>Worklist Algorithm: an Algorithm which takes Objects from a Worklist (a Queue of some sort) one at a time, processes it in some way, and perhaps further adds new Objects to the Worklist, until some Target is reached. Example: Breadth First Search.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Mining Input Grammars from Dynamic Taints</title>
    <link href="https://abbaswu.github.io/2022/11/02/Paper-Review-Mining-Input-Grammars-from-Dynamic-Taints/"/>
    <id>https://abbaswu.github.io/2022/11/02/Paper-Review-Mining-Input-Grammars-from-Dynamic-Taints/</id>
    <published>2022-11-02T07:00:00.000Z</published>
    <updated>2022-12-19T07:56:21.312Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://doi.org/10.1145/2970276.2970321">here</a>.</p><p>A program usually accepts a formal language as input. Inferring the grammar of this formal language is an important task with many use cases.</p><ul><li>Helps humans understand the structure of the formal language.<ul><li>Manually writing valid inputs</li><li>Reverse Engineering</li></ul></li><li>Generate inputs for testing and fuzzing</li></ul><p>The authors propose Autogram, a method that infers a Context Free Grammar given a set of sample inputs and a Java program that accepts that set of inputs and uses it in some way. Autogram adapts a Dynamic Taining-based approach: </p><ul><li>It monitors the data flow of each character within the input, with “the Input Fragment it came from” as the taint.</li><li>It traces method entries, method exits, field accesses, and array accesses within the execution of the program.</li><li>From such a trace, the Dynamic Call Tree is reconstructed, and the sets of Intervals (Input Fragments) processed by functions, stored in variables, and returned by functions is derived.</li><li>This is used to build an Interval Tree, and the Interval Tree is refined into a Pure Input Tree free of conflicting overlaps (resulting from parsers using lookaheads).</li><li>The pure input tree is assumed to be a Parse Tree, and Production Rules are derived from it. The leaf nodes are considered to be Terminals, and Regular Expressions matching them are learned.</li></ul><p>The authors then conduct an experimental study concerning the accuracy and completeness of the inferred Context Free Grammars using “parts of the Java Standard API that are used to process URLs and property files”, and “open source projects that implement support for CSV, INI, and JSON formats”.</p><hr><p>However, I had more questions than answers after reading this paper.</p><ul><li>One of the use cases that the authors mentioned is “the grammar vastly simplifies the creation of parsing programs that decompose existing inputs into their constituents”. Why don’t we directly extract the parsing logic out of the program Autogram runs on?</li><li>The type of Context Free Grammar inferred by Autogram seems to be an LL(1) Grammar. This type of Grammar is only able to represent simple Grammars, and does not support for Left Recursion, which is pervasive in real-world Grammars. Why don’t they infer an LALR(1) Grammar, which is both simple and expressive (it supports representing may real-world Programming Languages). Perhaps, a Hidden Markov Model could be trained to infer the Transitions between the States within the LALR(1) Parse Table should an LALR(1) Grammar be inferred?</li><li>In the current implementation of Autogram, tracing is efficient, as the authors have mentioned: “millions of calls result in traces of a few Megabytes”. However, the current implementation incurs a ~100x performance overhead, and there is a lot of room for performance optimization. Maybe ideas that we have discussed for TaintCheck and Qsym (direct Binary Analysis, preinstrumenting Bytecode, JIT compilation etc.) could be used here?</li><li>The specific process of refining an Interval Tree into a Pure Interval Tree free of conflicting overlaps is not described clearly in the paper. Why don’t the author present an example with figures showing the manipulation of nodes within the Interval Tree during this process? The author also mentions applying “a simple heuristic that assumes left to right processing of the input” to resolve possible ambiguities associated with parsers using lookaheads. However, what is the rationale behind this “simple heuristic”?</li><li>The specific process of deriving Production Rules from the Pure Interval Tree is also unclear. What do the authors mean by “We can thus check if nodes are compatible and can be used to derive productions for for the same nonterminal symbol”? What is the meaning of “compatible” in this context?</li><li>The programs used in the experimental study are all open-source programs of very high code quality (containing accurately named variables and functions). However, how well does Autogram work with closed-source programs, and&#x2F;or programs with low code quality, containing obscure variable and function names? This is frequently the situation we encounter when we try to reverse engineer the (often closed-source and&#x2F;or obscure) structure of a program’s input, one of the major use cases of Autogram.</li></ul><p>Also some inspiration and ideas I got from the paper:</p><ul><li>The author mentions that “dynamic tainting allows us to precisely identify which parts of a programs input are read, stored and processed at any point in time”. Could this technique be used in a Fuzzing context to identify which bits generated by a Coverage-Guided Fuzzer are used in which sections of a fuzzed program?</li><li>The logic of building an Interval Tree is very interesting, and it reads like the “Subset Tree” mentioned in the KLEE paper. I conject that both these Tree Structures could be generalized and used in a much wider range of contexts.</li></ul><hr><p>Feedback from the Class Discussion</p><ul><li>A Context Free Grammar may not capture the structure of binary files.</li><li>How does the approach compare to unsupervised parsing in NLP or fine-tuning language models, especially with a lot of input?</li><li>Is it possible to use feedback to improve the mined grammar?</li><li>From one tree, we infer one set of grammar rules; from 1000 trees, we infer 1000 sets of grammar rules. They are merged together to derive the final Context Free Grammar.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Various Solutions for Different Types of Reverse Proxying</title>
    <link href="https://abbaswu.github.io/2022/10/30/Various-Solutions-for-Different-Types-of-Reverse-Proxying/"/>
    <id>https://abbaswu.github.io/2022/10/30/Various-Solutions-for-Different-Types-of-Reverse-Proxying/</id>
    <published>2022-10-30T07:00:00.000Z</published>
    <updated>2022-12-18T19:57:43.647Z</updated>
    
    <content type="html"><![CDATA[<p>There are some situations in which we have to expose a locally running web service to the Internet. This is know as Reverse Proxying. Depending on the situation in hand, there are multiple ways to do this:</p><h1 id="Server-with-Public-IP-Available"><a href="#Server-with-Public-IP-Available" class="headerlink" title="Server with Public IP Available"></a>Server with Public IP Available</h1><p>In this case, the Server is also known as a Jump Server.</p><h2 id="Client-Accessible-from-Server"><a href="#Client-Accessible-from-Server" class="headerlink" title="Client Accessible from Server"></a>Client Accessible from Server</h2><p>Run a port-forwarding tool such as <code>socat</code> on the Server.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">socat TCP-LISTEN:&lt;Port the Server listens on&gt;,fork,reuseaddr TCP:&lt;IP address of the Client&gt;:&lt;Port of the Service on the Client&gt;<br></code></pre></td></tr></table></figure><h2 id="Client-Inaccessible-from-Server"><a href="#Client-Inaccessible-from-Server" class="headerlink" title="Client Inaccessible from Server"></a>Client Inaccessible from Server</h2><p>Use <a href="https://github.com/rofl0r/nat-tunnel">nat-tunnel</a> on both the Server and the Client.</p><p>Or, use <a href="https://jfrog.com/connect/post/reverse-ssh-tunneling-from-start-to-end/">Reverse SSH Tunneling</a> on the Client.</p><h3 id="Reverse-SSH-Tunneling"><a href="#Reverse-SSH-Tunneling" class="headerlink" title="Reverse SSH Tunneling"></a>Reverse SSH Tunneling</h3><h3 id="Before-Tunneling"><a href="#Before-Tunneling" class="headerlink" title="Before Tunneling"></a>Before Tunneling</h3><p>On the Server:</p><ul><li>Update the sshd config file (<code>/etc/ssh/sshd_config</code>). Set <code>GatewayPorts</code> to <code>yes</code>.</li><li>Restart the SSH Service.</li><li>Make sure the Port the Server listens on allows Inbound Traffic.</li></ul><h3 id="To-Tunnel"><a href="#To-Tunnel" class="headerlink" title="To Tunnel"></a>To Tunnel</h3><p>On the Client:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ssh [-f] [-N] [-T] -R &lt;Port the Server listens on&gt;:localhost:&lt;Port of the Service on the Client&gt; [How you connect to the Server (e.g. `-i key-pair.pem &lt;username&gt;@&lt;domain&gt;`)]<br></code></pre></td></tr></table></figure><ul><li><code>-f</code> tells the SSH to background itself after it authenticates, saving you time by not having to run something on the remote server for the tunnel to remain alive.</li><li><code>-N</code> if all you need is to create a tunnel without running any remote commands then include this option to save resources.</li><li><code>-T</code> useful to disable pseudo-tty allocation, which is fitting if you are not trying to create an interactive shell.</li><li><code>-R</code> tells the tunnel to answer on the remote side.</li></ul><h1 id="Server-with-Public-IP-Unavailable"><a href="#Server-with-Public-IP-Unavailable" class="headerlink" title="Server with Public IP Unavailable"></a>Server with Public IP Unavailable</h1><p>Use a commercial service such as <code>ngrok</code> on the Client.</p><p>References:</p><ul><li><a href="https://en.wikipedia.org/wiki/Reverse_proxy">https://en.wikipedia.org/wiki/Reverse_proxy</a></li><li><a href="https://www.kvm.la/1328.html">https://www.kvm.la/1328.html</a></li><li><a href="https://blog.csdn.net/weixin_35867652/article/details/104362302">https://blog.csdn.net/weixin_35867652/article/details/104362302</a></li><li><a href="https://www.hostinger.com/tutorials/how-to-set-up-nginx-reverse-proxy/">https://www.hostinger.com/tutorials/how-to-set-up-nginx-reverse-proxy/</a></li><li><a href="https://stevessmarthomeguide.com/understanding-port-forwarding/">https://stevessmarthomeguide.com/understanding-port-forwarding/</a></li><li><a href="https://jfrog.com/connect/post/reverse-ssh-tunneling-from-start-to-end/">https://jfrog.com/connect/post/reverse-ssh-tunneling-from-start-to-end/</a></li><li><a href="https://linuxhint.com/ssh-port-forwarding-linux/">https://linuxhint.com/ssh-port-forwarding-linux/</a></li><li><a href="https://www.ssh.com/academy/ssh/tunneling-example">https://www.ssh.com/academy/ssh/tunneling-example</a></li><li><a href="https://superuser.com/questions/1408427/remote-port-forwarding-through-a-jump-server">https://superuser.com/questions/1408427/remote-port-forwarding-through-a-jump-server</a></li><li><a href="https://unix.stackexchange.com/questions/436290/single-step-ssh-port-forwarding-not-working-but-only-works-when-ssh-port-forward?rq=1&amp;newreg=def5dfc9fb43466d8685fd7639eb17cc">https://unix.stackexchange.com/questions/436290/single-step-ssh-port-forwarding-not-working-but-only-works-when-ssh-port-forward?rq=1&amp;newreg=def5dfc9fb43466d8685fd7639eb17cc</a></li><li><a href="https://www.opensourceforu.com/2021/09/how-to-do-reverse-tunnelling-with-the-amazon-ec2-instance/">https://www.opensourceforu.com/2021/09/how-to-do-reverse-tunnelling-with-the-amazon-ec2-instance/</a></li><li><a href="https://superuser.com/questions/1194105/ssh-troubleshooting-remote-port-forwarding-failed-for-listen-port-errors">https://superuser.com/questions/1194105/ssh-troubleshooting-remote-port-forwarding-failed-for-listen-port-errors</a></li><li><a href="https://docs.hevodata.com/getting-started/connection-options/connecting-through-reverse-ssh/">https://docs.hevodata.com/getting-started/connection-options/connecting-through-reverse-ssh/</a></li><li><a href="https://www.youtube.com/watch?v=TZ6W9Hi9YJw">https://www.youtube.com/watch?v=TZ6W9Hi9YJw</a></li><li><a href="https://blog.devolutions.net/2017/03/what-is-reverse-ssh-port-forwarding/">https://blog.devolutions.net/2017/03/what-is-reverse-ssh-port-forwarding/</a></li><li><a href="https://chenhuijing.com/blog/tunnelling-services-for-exposing-localhost-to-the-web/">https://chenhuijing.com/blog/tunnelling-services-for-exposing-localhost-to-the-web/</a></li><li><a href="https://johackim.com/how-to-expose-local-server-behind-firewall">https://johackim.com/how-to-expose-local-server-behind-firewall</a></li><li><a href="https://gabrieltanner.org/blog/port-forwarding-frp/">https://gabrieltanner.org/blog/port-forwarding-frp/</a></li><li><a href="https://www.techiediaries.com/public-localhost/">https://www.techiediaries.com/public-localhost/</a></li><li><a href="https://superuser.com/questions/121435/is-it-possible-to-host-a-web-server-from-behind-a-nat/1360660">https://superuser.com/questions/121435/is-it-possible-to-host-a-web-server-from-behind-a-nat/1360660</a></li><li><a href="https://medium.com/tech-learnings/how-to-expose-a-local-server-to-the-internet-without-any-additional-tools-ae49e6b8fe93">https://medium.com/tech-learnings/how-to-expose-a-local-server-to-the-internet-without-any-additional-tools-ae49e6b8fe93</a></li><li><a href="https://serverfault.com/questions/282959/how-do-i-reach-my-internal-server-on-the-external-ip">https://serverfault.com/questions/282959/how-do-i-reach-my-internal-server-on-the-external-ip</a></li><li><a href="https://superuser.com/questions/624925/how-to-access-internal-valid-ip-through-internet">https://superuser.com/questions/624925/how-to-access-internal-valid-ip-through-internet</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;There are some situations in which we have to expose a locally running web service to the Internet. This is know as Reverse Proxying. Dep</summary>
      
    
    
    
    <category term="Code" scheme="https://abbaswu.github.io/categories/Code/"/>
    
    <category term="Computer Networking" scheme="https://abbaswu.github.io/categories/Code/Computer-Networking/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: Dynamic Taint Analysis for Automatic Detection, Analysis, and Signature Generation of Exploits on Commodity Software</title>
    <link href="https://abbaswu.github.io/2022/10/29/Paper-Review-Dynamic-Taint-Analysis-for-Automatic-Detection-Analysis-and-Signature-Generation-of-Exploits-on-Commodity-Software/"/>
    <id>https://abbaswu.github.io/2022/10/29/Paper-Review-Dynamic-Taint-Analysis-for-Automatic-Detection-Analysis-and-Signature-Generation-of-Exploits-on-Commodity-Software/</id>
    <published>2022-10-29T07:00:00.000Z</published>
    <updated>2022-12-19T07:51:11.005Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://valgrind.org/docs/newsome2005.pdf">here</a>.</p><p>To combat worms spread by the Internet exploiting software vulnerabilities, the paper proposes TaintCheck, a dynamic taint analysis technique for automatic detection of exploits on software.</p><p>Summary of TaintCheck:</p><ul><li>TaintCheck directly operates on an arbitrary executable and does not require its source code. It uses Valgrind to translate basic blocks being executed into Valgrind’s RISC-like instruction set (UCode), inserts UCode instructions for instrumentation, and passes the modified UCode back to Valgrind for execution.</li><li>TaintCheck by default considers data originating from the network as “untrusted” and taints it. It keeps track of “the propagation of tainted data as the program executes”, which involves monitoring data movement instructions and arithmetic instructions, with the exception of constant functions such as <code>xor eax, eax</code>.</li><li>To accomplish this, TaintCheck associates “each byte of memory” with a Taint data structure. Different instances of such a data structure are “chained” to record “how tainted data is propagated”.</li><li>TaintCheck checks whether tainted data is used in ways it considers illegitimate, such as being used as a return address, a function pointer, a format string, and (optionally) as an argument of a system call. When such illegitimate uses are detected, it is possible to collect information about a software vulnerability, especially “the execution path from tainted data’s entry and its use in a probable exploit”.</li></ul><p>The paper also proposes a new semantic-based automatic signature generation approach on top of TaintCheck.</p><hr><p>There are several questions that came to my mind when I was reading this paper:</p><ul><li>The paper mentions that “the current implementation slows program execution between 1.5 and 40 times”, but also mentions that “the prototype has not been optimized”, and proposes optimization techniques. Why didn’t the authors implement these optimization techniques and conduct experiments on the optimized TaintCheck?</li><li>There is no doubt that using Valgrind to translate basic blocks being executed into UCode greatly simplifies dynamic taint analysis on an arbitrary executable, as TaintCheck deals with an RISC-like instruction set instead of raw machine code. However, this incurs significant overhead. Would directly performing dynamic taint analysis on machine code at runtime using a dynamic binary instrumentation tool such as Intel Pin boost performance (like the case of QSym)? What about generating UCode, inserting instructions for instrumentation, and passing the modified UCode back to Valgrind <em>before the executable is executed</em>?</li><li>What is the overhead of using the Taint data structure? Would the total size of all Taint data structures explode for long-running processes? And why do they use this Taint data structure, instead of using a conventional Data Flow Graph?</li><li>What is the list of constant functions that TaintCheck supports? Is it representative, and is it extensible?</li><li>Are the ways tainted data is used considered by TaintCheck to be illegitimate representative of real exploits? How well can TaintCheck discriminate from “illegitimate” uses with intentional uses, and&#x2F;or uses with checks? Specifically, the paper mentions that TaintCheck can “untaint the data immediately after it has been sanity checked”, but how is this situation detected?</li><li>In the evaluation section, why are the benchmarks used in assessing “compatibility and false positives” different from those used in assessing “attack detection” on actual exploits?</li><li>What does a “signature” look like, and how is it used to filter attacks?</li></ul><hr><p>Feedback from the Class Discussion</p><ul><li>Performance is not a priority. <strong>The paper is more of a proof-of-concept, and even “reads like a grant proposal”</strong>, especially Section 6.</li><li>The “taint data structure” includes more information than a dataflow graph (snapshots of the stacks etc.). It can also use a <strong>“memory arena”</strong> instead of vanilla heap allocation to improve performance.</li><li>Some of the detected attacks may not be present in “safe”, managed languages.</li><li>Due to the large overhead, the technique cannot be used to handle requests in production, but requests can be forked to it instead.</li><li>Dynamic taint analysis can have applications outside of the security domain.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
  <entry>
    <title>Python in a Functional Style: Closures, Generators, and Coroutines</title>
    <link href="https://abbaswu.github.io/2022/10/28/Python-in-a-Functional-Style-Closures-Generators-and-Coroutines/"/>
    <id>https://abbaswu.github.io/2022/10/28/Python-in-a-Functional-Style-Closures-Generators-and-Coroutines/</id>
    <published>2022-10-28T07:00:00.000Z</published>
    <updated>2022-12-18T20:20:51.812Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h1><p>Python supports nested function definitions. However, should an inner function <strong>use an outer function’s local variable</strong> (instead of <strong>shadowing it</strong>), that local variable should be declared <code>nonlocal</code> within the inner function.</p><p>Not using <code>nonlocal</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">outer_function</span>():<br><span class="hljs-meta">... </span>  string = <span class="hljs-string">&#x27;Hello&#x27;</span><br><span class="hljs-meta">... </span>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner_function</span>():<br><span class="hljs-meta">... </span>    <span class="hljs-comment"># Shadows the local variable `string` of `outer_function`</span><br><span class="hljs-meta">... </span>    string = <span class="hljs-string">&#x27;World&#x27;</span><br><span class="hljs-meta">... </span>  inner_function()<br><span class="hljs-meta">... </span>  <span class="hljs-keyword">return</span> string<br><span class="hljs-meta">... </span><br><span class="hljs-meta">&gt;&gt;&gt; </span>outer_function()<br><span class="hljs-string">&#x27;Hello&#x27;</span><br></code></pre></td></tr></table></figure><hr><h1 id="Closures-1"><a href="#Closures-1" class="headerlink" title="Closures"></a>Closures</h1><p>Python supports nested function definitions. However, should an inner function <strong>use an outer function’s local variable</strong> (instead of <strong>shadowing it</strong>), that local variable should be declared <code>nonlocal</code> within the inner function.</p><p>Using <code>nonlocal</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">outer_function</span>():<br><span class="hljs-meta">... </span>    string = <span class="hljs-string">&#x27;Hello&#x27;</span><br><span class="hljs-meta">... </span>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner_function</span>():<br><span class="hljs-meta">... </span>        <span class="hljs-comment"># Uses the local variable `string` of `outer_function`</span><br><span class="hljs-meta">... </span>        <span class="hljs-keyword">nonlocal</span> string<br><span class="hljs-meta">... </span>        string = <span class="hljs-string">&#x27;World&#x27;</span><br><span class="hljs-meta">... </span>    inner_function()<br><span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> string<br><span class="hljs-meta">... </span><br><span class="hljs-meta">&gt;&gt;&gt; </span>outer_function()<br><span class="hljs-string">&#x27;World&#x27;</span><br></code></pre></td></tr></table></figure><hr><h1 id="Closures-2"><a href="#Closures-2" class="headerlink" title="Closures"></a>Closures</h1><p>All Python functions are <strong>closures</strong>.</p><ul><li>Function code</li><li>Execution environment of function code</li></ul><p>A nested function can be returned. This is a common design pattern for creating <strong>tailored functions</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_greeting_function</span>(<span class="hljs-params">name</span>):<br><span class="hljs-meta">... </span>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">greeting_function</span>():<br><span class="hljs-meta">... </span>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Hello, <span class="hljs-subst">&#123;name&#125;</span>&#x27;</span>)<br><span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> greeting_function<br><span class="hljs-meta">... </span><br></code></pre></td></tr></table></figure><hr><h1 id="Closures-3"><a href="#Closures-3" class="headerlink" title="Closures"></a>Closures</h1><p>All Python functions are <strong>closures</strong>.</p><ul><li>Function code</li><li>Execution environment of function code</li></ul><p>A nested function can be returned. This is a common design pattern for creating <strong>tailored functions</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_a = get_greeting_function(<span class="hljs-string">&#x27;A&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_a()<br>Hello, A<br>&gt;&gt;&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_b = get_greeting_function(<span class="hljs-string">&#x27;B&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_b()<br>Hello, B<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-4"><a href="#Closures-4" class="headerlink" title="Closures"></a>Closures</h1><p>Look into a closure’s <code>cell_contents</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_a.__closure__<br>(&lt;cell at <span class="hljs-number">0x7f3c81849ca8</span>: <span class="hljs-built_in">str</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7f3c8185ac70</span>&gt;,)<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_a.__closure__[<span class="hljs-number">0</span>]<br>&lt;cell at <span class="hljs-number">0x7f3c81849ca8</span>: <span class="hljs-built_in">str</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7f3c8185ac70</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_a.__closure__[<span class="hljs-number">0</span>].cell_contents<br><span class="hljs-string">&#x27;A&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_b.__closure__<br>(&lt;cell at <span class="hljs-number">0x7f3c81849c18</span>: <span class="hljs-built_in">str</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7f3c82f18e30</span>&gt;,)<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_b.__closure__[<span class="hljs-number">0</span>]<br>&lt;cell at <span class="hljs-number">0x7f3c81849c18</span>: <span class="hljs-built_in">str</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7f3c82f18e30</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>function_greeting_b.__closure__[<span class="hljs-number">0</span>].cell_contents<br><span class="hljs-string">&#x27;B&#x27;</span><br></code></pre></td></tr></table></figure><hr><h1 id="Closures-5"><a href="#Closures-5" class="headerlink" title="Closures"></a>Closures</h1><p><strong>Creating and returning a nested function based on a function argument passed to the outer function</strong> is another widely used design pattern in Python, called <strong>decorating a function</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cached</span>(<span class="hljs-params">function</span>):<br>    cache = &#123;&#125;<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cached_function</span>(<span class="hljs-params">*args</span>):<br>        <span class="hljs-keyword">nonlocal</span> function, cache<br>        <span class="hljs-keyword">if</span> args <span class="hljs-keyword">in</span> cache:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Cache hit with args: <span class="hljs-subst">&#123;args&#125;</span>&#x27;</span>)<br>            <span class="hljs-keyword">return</span> cache[args]<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Cache miss with args: <span class="hljs-subst">&#123;args&#125;</span>&#x27;</span>)<br>            result = function(*args)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Writing f(<span class="hljs-subst">&#123;args&#125;</span>) =&gt; <span class="hljs-subst">&#123;result&#125;</span> to cache&#x27;</span>)<br>            cache[args] = result<br>            <span class="hljs-keyword">return</span> result<br>    <br>    <span class="hljs-keyword">return</span> cached_function<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-6"><a href="#Closures-6" class="headerlink" title="Closures"></a>Closures</h1><p><strong>Creating and returning a nested function based on a function argument passed to the outer function</strong> is another widely used design pattern in Python, called <strong>decorating a function</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x * x<br><br>cached_square = cached(square)<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-7"><a href="#Closures-7" class="headerlink" title="Closures"></a>Closures</h1><p><strong>Creating and returning a nested function based on a function argument passed to the outer function</strong> is another widely used design pattern in Python, called <strong>decorating a function</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">15</span>]: cached_square(<span class="hljs-number">1</span>)                                                     <br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">1</span>,)<br>Writing f((<span class="hljs-number">1</span>,)) =&gt; <span class="hljs-number">1</span> to cache<br>Out[<span class="hljs-number">15</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">16</span>]: cached_square(<span class="hljs-number">2</span>)                                                     <br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">2</span>,)<br>Writing f((<span class="hljs-number">2</span>,)) =&gt; <span class="hljs-number">4</span> to cache<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">17</span>]: cached_square(<span class="hljs-number">1</span>)                                                     <br>Cache hit <span class="hljs-keyword">with</span> args: (<span class="hljs-number">1</span>,)<br>Out[<span class="hljs-number">17</span>]: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><hr><h1 id="Closures-8"><a href="#Closures-8" class="headerlink" title="Closures"></a>Closures</h1><p>Python even has special syntatical support for this.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@cached</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">elif</span> n &lt; <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-9"><a href="#Closures-9" class="headerlink" title="Closures"></a>Closures</h1><p>Python even has special syntatical support for this.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">4</span>]: fib(<span class="hljs-number">5</span>)                                                                                       <br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">5</span>,)<br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">4</span>,)<br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">3</span>,)<br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">2</span>,)<br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">1</span>,)<br>Writing f((<span class="hljs-number">1</span>,)) =&gt; <span class="hljs-number">1</span> to cache<br>Cache miss <span class="hljs-keyword">with</span> args: (<span class="hljs-number">0</span>,)<br>Writing f((<span class="hljs-number">0</span>,)) =&gt; <span class="hljs-number">0</span> to cache<br>Writing f((<span class="hljs-number">2</span>,)) =&gt; <span class="hljs-number">1</span> to cache<br>Cache hit <span class="hljs-keyword">with</span> args: (<span class="hljs-number">1</span>,)<br>Writing f((<span class="hljs-number">3</span>,)) =&gt; <span class="hljs-number">2</span> to cache<br>Cache hit <span class="hljs-keyword">with</span> args: (<span class="hljs-number">2</span>,)<br>Writing f((<span class="hljs-number">4</span>,)) =&gt; <span class="hljs-number">3</span> to cache<br>Cache hit <span class="hljs-keyword">with</span> args: (<span class="hljs-number">3</span>,)<br>Writing f((<span class="hljs-number">5</span>,)) =&gt; <span class="hljs-number">5</span> to cache<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>$O(n)$ time complexity.</p><hr><h1 id="Closures-10"><a href="#Closures-10" class="headerlink" title="Closures"></a>Closures</h1><p>The <code>functools</code> library provides several commonly-used decorators:</p><ul><li><code>functools.lru_cache</code></li><li><code>functools.partial</code></li><li><code>functools.singledispatch</code></li></ul><hr><h1 id="Closures-11"><a href="#Closures-11" class="headerlink" title="Closures"></a>Closures</h1><p><code>functools.lru_cache</code></p><p>Given n pairs of parentheses, write a function to generate all combinations of well-formed parentheses. </p><p>Example 1:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">Input:</span> n = <span class="hljs-number">3</span><br><span class="hljs-symbol">Output:</span> [<span class="hljs-string">&quot;((()))&quot;</span>,<span class="hljs-string">&quot;(()())&quot;</span>,<span class="hljs-string">&quot;(())()&quot;</span>,<span class="hljs-string">&quot;()(())&quot;</span>,<span class="hljs-string">&quot;()()()&quot;</span>]<br></code></pre></td></tr></table></figure><p>Example 2:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">Input:</span> n = <span class="hljs-number">1</span><br><span class="hljs-symbol">Output:</span> [<span class="hljs-string">&quot;()&quot;</span>]<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-12"><a href="#Closures-12" class="headerlink" title="Closures"></a>Closures</h1><p><img src="/images/grammar.png" alt="Grammar"></p><hr><h1 id="Closures-13"><a href="#Closures-13" class="headerlink" title="Closures"></a>Closures</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@functools.lru_cache(<span class="hljs-params">maxsize=<span class="hljs-literal">None</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">s_generator</span>(<span class="hljs-params">number_of_parenthesis</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;s_generator(<span class="hljs-subst">&#123;number_of_parenthesis&#125;</span>)&#x27;</span>)<br>    <br>    return_value = []<br>    <br>    <span class="hljs-comment"># s -&gt; ss .</span><br>    <span class="hljs-keyword">if</span> number_of_parenthesis &gt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">for</span> ss_string <span class="hljs-keyword">in</span> ss_generator(number_of_parenthesis):<br>            return_value.append(ss_string)<br>    <br>    <span class="hljs-comment"># s -&gt; s ss .</span><br>    <span class="hljs-keyword">if</span> number_of_parenthesis &gt;= <span class="hljs-number">2</span>: <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, number_of_parenthesis):<br>            <span class="hljs-keyword">for</span> s_string, ss_string <span class="hljs-keyword">in</span> itertools.product(<br>                s_generator(i),<br>                ss_generator(number_of_parenthesis - i)<br>            ):<br>                return_value.append(s_string + ss_string)<br>    <br>    <span class="hljs-keyword">return</span> return_value<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-14"><a href="#Closures-14" class="headerlink" title="Closures"></a>Closures</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@functools.lru_cache(<span class="hljs-params">maxsize=<span class="hljs-literal">None</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ss_generator</span>(<span class="hljs-params">number_of_parenthesis</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;ss_generator(<span class="hljs-subst">&#123;number_of_parenthesis&#125;</span>)&#x27;</span>)<br>    <br>    return_value = []<br>    <br>    <span class="hljs-comment"># ss -&gt; ( ) .</span><br>    <span class="hljs-keyword">if</span> number_of_parenthesis == <span class="hljs-number">1</span>:<br>        return_value.append(<span class="hljs-string">&#x27;()&#x27;</span>)<br>    <span class="hljs-comment"># ss -&gt; ( s ) .</span><br>    <span class="hljs-keyword">if</span> number_of_parenthesis &gt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">for</span> s_string <span class="hljs-keyword">in</span> s_generator(number_of_parenthesis - <span class="hljs-number">1</span>):<br>            return_value.append(<span class="hljs-string">&#x27;(&#x27;</span> + s_string + <span class="hljs-string">&#x27;)&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> return_value<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-15"><a href="#Closures-15" class="headerlink" title="Closures"></a>Closures</h1><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">Input:</span> n = <span class="hljs-number">3</span><br><span class="hljs-symbol">Output:</span> [<span class="hljs-string">&quot;((()))&quot;</span>,<span class="hljs-string">&quot;(()())&quot;</span>,<span class="hljs-string">&quot;(())()&quot;</span>,<span class="hljs-string">&quot;()(())&quot;</span>,<span class="hljs-string">&quot;()()()&quot;</span>]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">4</span>]: s_generator(<span class="hljs-number">3</span>)                                                                               <br>s_generator(<span class="hljs-number">3</span>)<br>ss_generator(<span class="hljs-number">3</span>)<br>s_generator(<span class="hljs-number">2</span>)<br>ss_generator(<span class="hljs-number">2</span>)<br>s_generator(<span class="hljs-number">1</span>)<br>ss_generator(<span class="hljs-number">1</span>)<br>Out[<span class="hljs-number">4</span>]: [<span class="hljs-string">&#x27;((()))&#x27;</span>, <span class="hljs-string">&#x27;(()())&#x27;</span>, <span class="hljs-string">&#x27;()(())&#x27;</span>, <span class="hljs-string">&#x27;(())()&#x27;</span>, <span class="hljs-string">&#x27;()()()&#x27;</span>]<br><br>In [<span class="hljs-number">5</span>]: s_generator.cache_info()                                                                     <br>Out[<span class="hljs-number">5</span>]: CacheInfo(hits=<span class="hljs-number">3</span>, misses=<span class="hljs-number">3</span>, maxsize=<span class="hljs-literal">None</span>, currsize=<span class="hljs-number">3</span>)<br><br>In [<span class="hljs-number">6</span>]: ss_generator.cache_info()                                                                    <br>Out[<span class="hljs-number">6</span>]: CacheInfo(hits=<span class="hljs-number">3</span>, misses=<span class="hljs-number">3</span>, maxsize=<span class="hljs-literal">None</span>, currsize=<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-16"><a href="#Closures-16" class="headerlink" title="Closures"></a>Closures</h1><p>Closures provide an efficient mechanism for <strong>maintaining state between several calls</strong>.</p><p>Traditional (OOP) approach:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Countdown</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next_value</span>(<span class="hljs-params">self</span>):<br>        old_value = self.n<br>        self.n -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> old_value<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-17"><a href="#Closures-17" class="headerlink" title="Closures"></a>Closures</h1><p>Closures provide an efficient mechanism for <strong>maintaining state between several calls</strong>.</p><p>Closure-based approach:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">countdown</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_next_value</span>():<br>        <span class="hljs-keyword">nonlocal</span> n<br>        old_value = n<br>        n -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> old_value<br>    <br>    <span class="hljs-keyword">return</span> get_next_value<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-18"><a href="#Closures-18" class="headerlink" title="Closures"></a>Closures</h1><p>This is not only clean but also <strong>fast</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_object_oriented_approach</span>():<br>    c = Countdown(<span class="hljs-number">1_000_000</span>)<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        value = c.next_value()<br>        <span class="hljs-keyword">if</span> value == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">break</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_functional_approach</span>():<br>    get_next_value = countdown(<span class="hljs-number">1_000_000</span>)<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        value = get_next_value()<br>        <span class="hljs-keyword">if</span> value == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><hr><h1 id="Closures-19"><a href="#Closures-19" class="headerlink" title="Closures"></a>Closures</h1><p>This is not only clean but also <strong>fast</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">5</span>]: %timeit test_object_oriented_approach()<br><span class="hljs-number">182</span> ms ± <span class="hljs-number">2.61</span> ms per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">1</span> loop each)<br><br>In [<span class="hljs-number">6</span>]: %timeit test_functional_approach()<br><span class="hljs-number">96.8</span> ms ± <span class="hljs-number">1.18</span> ms per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10</span> loops each)<br></code></pre></td></tr></table></figure><hr><h1 id="Closures-20"><a href="#Closures-20" class="headerlink" title="Closures"></a>Closures</h1><p>Why?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">9</span>]: c = Countdown(<span class="hljs-number">1_000_000</span>)                                               <br><br>In [<span class="hljs-number">10</span>]: dis(c.next_value)                                                     <br>  <span class="hljs-number">6</span>           <span class="hljs-number">0</span> LOAD_FAST                <span class="hljs-number">0</span> (self)<br>              <span class="hljs-number">2</span> LOAD_ATTR                <span class="hljs-number">0</span> (n)<br>              <span class="hljs-number">4</span> STORE_FAST               <span class="hljs-number">1</span> (old_value)<br><br>  <span class="hljs-number">7</span>           <span class="hljs-number">6</span> LOAD_FAST                <span class="hljs-number">0</span> (self)<br>              <span class="hljs-number">8</span> DUP_TOP<br>             <span class="hljs-number">10</span> LOAD_ATTR                <span class="hljs-number">0</span> (n)<br>             <span class="hljs-number">12</span> LOAD_CONST               <span class="hljs-number">1</span> (<span class="hljs-number">1</span>)<br>             <span class="hljs-number">14</span> INPLACE_SUBTRACT<br>             <span class="hljs-number">16</span> ROT_TWO<br>             <span class="hljs-number">18</span> STORE_ATTR               <span class="hljs-number">0</span> (n)<br><br>  <span class="hljs-number">8</span>          <span class="hljs-number">20</span> LOAD_FAST                <span class="hljs-number">1</span> (old_value)<br>             <span class="hljs-number">22</span> RETURN_VALUE<br></code></pre></td></tr></table></figure><p>12 instructions, 2 <code>LOAD_ATTR</code> instructions, 1 <code>STORE_ATTR</code> instruction.</p><hr><h1 id="Closures-21"><a href="#Closures-21" class="headerlink" title="Closures"></a>Closures</h1><p>Why?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">11</span>]: get_next_value = countdown(<span class="hljs-number">1_000_000</span>)                                 <br><br>In [<span class="hljs-number">12</span>]: dis(get_next_value)                                                   <br>  <span class="hljs-number">4</span>           <span class="hljs-number">0</span> LOAD_DEREF               <span class="hljs-number">0</span> (n)<br>              <span class="hljs-number">2</span> STORE_FAST               <span class="hljs-number">0</span> (old_value)<br><br>  <span class="hljs-number">5</span>           <span class="hljs-number">4</span> LOAD_DEREF               <span class="hljs-number">0</span> (n)<br>              <span class="hljs-number">6</span> LOAD_CONST               <span class="hljs-number">1</span> (<span class="hljs-number">1</span>)<br>              <span class="hljs-number">8</span> INPLACE_SUBTRACT<br>             <span class="hljs-number">10</span> STORE_DEREF              <span class="hljs-number">0</span> (n)<br><br>  <span class="hljs-number">6</span>          <span class="hljs-number">12</span> LOAD_FAST                <span class="hljs-number">0</span> (old_value)<br>             <span class="hljs-number">14</span> RETURN_VALUE<br></code></pre></td></tr></table></figure><p>8 instructions, NO <code>LOAD_ATTR</code>, <code>STORE_ATTR</code> instructions.</p><hr><h1 id="Generators"><a href="#Generators" class="headerlink" title="Generators"></a>Generators</h1><p>When we define a function containing the <code>yield</code> keyword, we define a generator. Defining a generator allows the user to define a <strong>custom iterator</strong> in the style of defining a function.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">countdown</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">yield</span> n<br>        n -= <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><hr><h1 id="Generators-1"><a href="#Generators-1" class="headerlink" title="Generators"></a>Generators</h1><p>We create a <strong>generator object</strong> when we call a generator definition. The generator object can be used like any iterator:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">2</span>]: c = countdown(<span class="hljs-number">5</span>)<br><br>In [<span class="hljs-number">3</span>]: <span class="hljs-built_in">next</span>(c)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">5</span><br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(c)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">5</span>]: <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> c:<br>   ...:     <span class="hljs-built_in">print</span>(value)<br>   ...:<br><span class="hljs-number">3</span><br><span class="hljs-number">2</span><br><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><hr><h1 id="Generators-2"><a href="#Generators-2" class="headerlink" title="Generators"></a>Generators</h1><p>When we call <code>next()</code> on a generator object, it will execute code, until it encounters a <code>yield</code> statement. The <code>yield</code> statement tells the generator object to <strong>return a value, and continue execution from here when <code>next()</code> is called again</strong>. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">2</span>]: c = countdown(<span class="hljs-number">5</span>)<br><br>In [<span class="hljs-number">3</span>]: <span class="hljs-built_in">next</span>(c)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>This executes:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">yield</span> n<br></code></pre></td></tr></table></figure><p>and returns <code>n</code>.</p><hr><h1 id="Generators-3"><a href="#Generators-3" class="headerlink" title="Generators"></a>Generators</h1><p>When we call <code>next()</code> on a generator object, it will execute code, until it encounters a <code>yield</code> statement. The <code>yield</code> statement tells the generator object to <strong>return a value, and continue execution from here when <code>next()</code> is called again</strong>. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(c)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>This executes:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">   n -= <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<br>   <span class="hljs-keyword">yield</span> n<br></code></pre></td></tr></table></figure><p>and returns <code>n</code>.</p><hr><h1 id="Generators-4"><a href="#Generators-4" class="headerlink" title="Generators"></a>Generators</h1><p>This is called <strong>lazy evaluation</strong>. This can dramatically boost performance and reduce memory usage in some applications. For example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_comments_from_file</span>(<span class="hljs-params">file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fp:<br>            <span class="hljs-comment"># strip whitespace</span><br>            stripped_line = line.strip()<br>            <span class="hljs-comment"># check if the line is empty after stripping whitespace</span><br>            <span class="hljs-keyword">if</span> stripped_line:<br>                <span class="hljs-comment"># check if the line is a comment</span><br>                <span class="hljs-keyword">if</span> stripped_line[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;#&#x27;</span>:<br>                    <span class="hljs-comment"># if it is, yield it</span><br>                    <span class="hljs-keyword">yield</span> stripped_line<br></code></pre></td></tr></table></figure><hr><h1 id="Generators-5"><a href="#Generators-5" class="headerlink" title="Generators"></a>Generators</h1><p>This will <strong>NOT</strong> read the whole file into memory. Only when the user calls <code>next()</code> on the generator object, will the generator read the file <strong>LINE BY LINE</strong> (with only <strong>ONE LINE</strong> of the file in memory at once), and return the next comment line.</p><p>This is an efficient way of extracting comments from GB-sized files (such as logs).</p><hr><h1 id="itertools"><a href="#itertools" class="headerlink" title="itertools"></a>itertools</h1><p>Python provides many functions for creating an iterator from another iterator:</p><ul><li>Filtering<ul><li><code>filter(predicate, iterable)</code></li><li><code>itertools.filterfalse(predicate, iterable)</code></li><li><code>itertools.dropwhile(predicate, iterable)</code></li><li><code>itertools.takewhile(predicate, iterable)</code></li><li><code>itertools.islice(predicate, [start,] stop [,step])</code></li></ul></li></ul><hr><h1 id="itertools-1"><a href="#itertools-1" class="headerlink" title="itertools"></a>itertools</h1><p>Python provides many functions for creating an iterator from another iterator:</p><ul><li>Permutations and Combinations<ul><li><code>itertools.permutations(iterable [, r])</code></li><li><code>itertools.combinations(iterable, r)</code></li></ul></li></ul><hr><h1 id="itertools-2"><a href="#itertools-2" class="headerlink" title="itertools"></a>itertools</h1><p>Python provides many functions for creating an iterator from another iterator:</p><ul><li>Combining<ul><li><code>zip(iter1, iter2, ... iterN)</code></li><li><code>itertools.product(iter1, iter2, ... iterN, [repeat=1])</code></li></ul></li></ul><hr><h1 id="itertools-3"><a href="#itertools-3" class="headerlink" title="itertools"></a>itertools</h1><p>Python provides many functions for creating an iterator from another iterator:</p><ul><li>Enumerating<ul><li><code>enumerate(iterable, start=0)</code></li></ul></li></ul><hr><h1 id="itertools-4"><a href="#itertools-4" class="headerlink" title="itertools"></a>itertools</h1><p>Python provides many functions for creating an iterator from another iterator:</p><ul><li>Map and Reduce<ul><li><code>map(func, *iterables)</code></li><li><code>functools.reduce(function, sequence[, initial])</code></li></ul></li></ul><hr><h1 id="itertools-5"><a href="#itertools-5" class="headerlink" title="itertools"></a>itertools</h1><p>Widely used in algorithms: <code>itertools.permutations(iterable [,r])</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> itertools<br><br><br>In [<span class="hljs-number">2</span>]: numbers = <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>)<br><br>In [<span class="hljs-number">3</span>]: permutations_of_two_numbers_iterator = itertools.permutations(numbers, r=<span class="hljs-number">2</span>)<br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(permutations_of_two_numbers_iterator)<br>Out[<span class="hljs-number">4</span>]: (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br><br>In [<span class="hljs-number">5</span>]: <span class="hljs-built_in">next</span>(permutations_of_two_numbers_iterator)<br>Out[<span class="hljs-number">5</span>]: (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)<br><br>In [<span class="hljs-number">6</span>]: <span class="hljs-built_in">next</span>(permutations_of_two_numbers_iterator)<br>Out[<span class="hljs-number">6</span>]: (<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)<br><br>In [<span class="hljs-number">7</span>]: <span class="hljs-built_in">next</span>(permutations_of_two_numbers_iterator)<br>Out[<span class="hljs-number">7</span>]: (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><hr><h1 id="itertools-6"><a href="#itertools-6" class="headerlink" title="itertools"></a>itertools</h1><p>Widely used in algorithms: <code>itertools.combinations(iterable ,r)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> itertools<br><br>In [<span class="hljs-number">2</span>]: numbers = <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>)<br><br>In [<span class="hljs-number">3</span>]: <span class="hljs-keyword">for</span> first, second <span class="hljs-keyword">in</span> itertools.combinations(numbers, <span class="hljs-number">2</span>):<br>   ...:     <span class="hljs-built_in">print</span>(first, second)<br>   ...:<br><span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-number">0</span> <span class="hljs-number">2</span><br><span class="hljs-number">0</span> <span class="hljs-number">3</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-number">1</span> <span class="hljs-number">3</span><br><span class="hljs-number">2</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><hr><h1 id="Coroutines"><a href="#Coroutines" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Starting from Python 2.5, the <code>yield</code> statement can be used as an <strong>right value</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">captured_input = <span class="hljs-keyword">yield</span> value_to_yield<br></code></pre></td></tr></table></figure><p>Generators defined like this can <strong>accept sent input</strong> while providing output. These generators are called <strong>coroutines</strong>.</p><hr><h1 id="Coroutines-1"><a href="#Coroutines-1" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>The concept of coroutines was proposed in the 60s, but only gained traction in recent years.</p><p>Coroutines can be seen as a combination of <strong>subroutines</strong> and <strong>threads</strong>.</p><ul><li>Can <strong>pause and restart</strong> during execution.</li><li>Controlled by <strong>itself</strong> instead of the operating system.</li><li>Different coroutines run within a thread are <strong>concurrent</strong> instead of <strong>parallel</strong>.</li></ul><hr><h1 id="Coroutines-2"><a href="#Coroutines-2" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Simple example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_mean</span>():<br>    current_input = <span class="hljs-keyword">yield</span><br>    <br>    <span class="hljs-built_in">sum</span> = current_input<br>    count = <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        current_input = <span class="hljs-keyword">yield</span> <span class="hljs-built_in">sum</span> / count<br>        <br>        <span class="hljs-built_in">sum</span> += current_input<br>        count += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><hr><h1 id="Coroutines-3"><a href="#Coroutines-3" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Simple example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">3</span>]: updater = update_mean()<br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(updater)<br></code></pre></td></tr></table></figure><p>This executes:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">current_input = <span class="hljs-keyword">yield</span><br></code></pre></td></tr></table></figure><p>And the coroutine waits for an input to be sent.</p><hr><h1 id="Coroutines-4"><a href="#Coroutines-4" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Send an input:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">5</span>]: updater.send(<span class="hljs-number">2</span>)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><p>The coroutine receives the input, and executes:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span> = current_input<br>count = <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    current_input = <span class="hljs-keyword">yield</span> <span class="hljs-built_in">sum</span> / count<br></code></pre></td></tr></table></figure><p>And the coroutine waits for an input to be sent.</p><hr><h1 id="Coroutines-5"><a href="#Coroutines-5" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Send an input:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">6</span>]: updater.send(<span class="hljs-number">4</span>)<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">3.0</span><br></code></pre></td></tr></table></figure><p>The coroutine receives the input, and executes:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">    <span class="hljs-built_in">sum</span> += current_input<br>    count += <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    current_input = <span class="hljs-keyword">yield</span> <span class="hljs-built_in">sum</span> / count<br></code></pre></td></tr></table></figure><p>And the coroutine waits again for an input to be sent.</p><hr><h1 id="Coroutines-6"><a href="#Coroutines-6" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>More complicated example: set-associative cache simulation</p><ul><li>The whole set-associative cache is a coroutine receiving <code>(address, is_write)</code> tuples as input, and calculating <code>(cache_hit, writeback_address)</code> tuples as output.<ul><li>It models <strong>each set</strong> as a coroutine receiving <code>(tag, is_write)</code> tuples as input, and calculating <code>(cache_hit, writeback_address)</code> tuples as output.<ul><li>Different coroutine definitions for round-robin, LRU, etc.</li></ul></li></ul></li></ul><hr><h1 id="Coroutines-7"><a href="#Coroutines-7" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>The whole set-associative cache</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_coroutine</span>(<span class="hljs-params">cache_set_coroutine_function, block_size_in_bytes, number_of_ways_of_associativity, number_of_cache_sets</span>):<br>    <span class="hljs-comment"># create cache_set_coroutine_list and activate each cache_set_coroutine</span><br>    cache_set_coroutine_list = [ cache_set_coroutine_function(number_of_ways_of_associativity) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(number_of_cache_sets) ]<br>    <span class="hljs-keyword">for</span> cache_set_coroutine <span class="hljs-keyword">in</span> cache_set_coroutine_list:<br>        <span class="hljs-built_in">next</span>(cache_set_coroutine)<br>    <br>    <span class="hljs-comment"># get function_to_split_address and function_to_merge_address</span><br>    function_to_split_address, function_to_merge_address = get_functions_to_split_and_merge_address(<br>        block_size_in_bytes,<br>        number_of_cache_sets<br>    )<br>    <br>    <span class="hljs-comment"># receive address, is_write</span><br>    <span class="hljs-comment"># yields nothing</span><br>    address, is_write = <span class="hljs-keyword">yield</span><br>    <br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># splits address</span><br>        tag, cache_set_index, offset = function_to_split_address(address)<br>        <br>        <span class="hljs-comment"># send (tag, is_write) to the appropriate cache_set_coroutine</span><br>        cache_hit, victim_tag, writeback_required = cache_set_coroutine_list[cache_set_index].send((tag, is_write))<br>        <br>        <span class="hljs-comment"># create writeback_address if (victim_tag is not None) and writeback_required</span><br>        <span class="hljs-keyword">if</span> (victim_tag <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>) <span class="hljs-keyword">and</span> writeback_required:<br>            writeback_address = function_to_merge_address(victim_tag, cache_set_index, <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">else</span>:<br>            writeback_address = <span class="hljs-literal">None</span><br>        <br>        <span class="hljs-comment"># receive address, is_write</span><br>        <span class="hljs-comment"># yield cache_hit, writeback_address</span><br>        address, is_write = <span class="hljs-keyword">yield</span> cache_hit, writeback_address<br></code></pre></td></tr></table></figure><hr><h1 id="Coroutines-8"><a href="#Coroutines-8" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Set with LRU replacement policy</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">lru_cache_set_coroutine</span>(<span class="hljs-params">associativity</span>):<br>    tag_list = [ <span class="hljs-literal">None</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(associativity) ]<br>    dirty_bit_list = [ <span class="hljs-literal">False</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(associativity) ]<br>    <br>    indices_in_lru_order = OrderedDict()<br>    <span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(associativity - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        indices_in_lru_order[index] = <span class="hljs-literal">None</span><br>    <br>    <span class="hljs-comment"># receive first tag and is_write</span><br>    <span class="hljs-comment"># yields nothing</span><br>    tag, is_write = <span class="hljs-keyword">yield</span><br>    <br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        cache_hit = <span class="hljs-literal">False</span><br>        victim_tag = <span class="hljs-literal">None</span><br>        writeback_required = <span class="hljs-literal">False</span><br>        <br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># find tag_index</span><br>            tag_index = tag_list.index(tag)<br>            <br>            <span class="hljs-comment"># tag_index found</span><br>            cache_hit = <span class="hljs-literal">True</span><br>            <br>            <span class="hljs-keyword">if</span> is_write:<br>                dirty_bit_list[tag_index] = <span class="hljs-literal">True</span><br>            <br>            <span class="hljs-comment"># move tag_index to the end of indices_in_lru_order</span><br>            indices_in_lru_order.move_to_end(tag_index)<br>        <br>        <span class="hljs-keyword">except</span> ValueError:<br>            <span class="hljs-comment"># tag_index not found</span><br>            <br>            <span class="hljs-comment"># get index_of_victim from indices_in_lru_order</span><br>            index_of_victim, _ = indices_in_lru_order.popitem(last=<span class="hljs-literal">False</span>)<br>            <br>            victim_tag = tag_list[index_of_victim]<br>            <br>            <span class="hljs-keyword">if</span> dirty_bit_list[index_of_victim]:<br>                writeback_required = <span class="hljs-literal">True</span><br>            <br>            tag_list[index_of_victim] = tag<br>            <br>            <span class="hljs-keyword">if</span> is_write:<br>                dirty_bit_list[index_of_victim] = <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">else</span>:<br>                dirty_bit_list[index_of_victim] = <span class="hljs-literal">False</span><br>            <br>            <span class="hljs-comment"># insert index_of_victim to the end of indices_in_lru_order</span><br>            indices_in_lru_order[index_of_victim] = <span class="hljs-literal">None</span><br>            <br>        <span class="hljs-comment"># receive tag and is_write</span><br>        <span class="hljs-comment"># yield (cache_hit, victim_tag, writeback_required)</span><br>        tag, is_write = <span class="hljs-keyword">yield</span> (cache_hit, victim_tag, writeback_required)<br></code></pre></td></tr></table></figure><hr><h1 id="Coroutines-9"><a href="#Coroutines-9" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Cache Simulation</p><p>Cache</p><ul><li><code>number_of_cache_sets</code> Set<ul><li><code>number_of_ways_of_associativity</code> Block<ul><li><code>block_size_in_bytes</code> Byte</li></ul></li></ul></li></ul><p>Suppose our cache has only eight blocks and each block contains four words. The cache is 2-way set associative, so there are four sets of two blocks. The write policy is write-back and write-allocate. LRU replacement is used. Assume memory is initialized to zero.</p><p><a href="https://courses.cs.washington.edu/courses/cse378/02sp/sections/section9-3.html">https://courses.cs.washington.edu/courses/cse378/02sp/sections/section9-3.html</a></p><hr><h1 id="Coroutines-10"><a href="#Coroutines-10" class="headerlink" title="Coroutines"></a>Coroutines</h1><p>Cache Simulation</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">3</span>]: cache = cache_coroutine(lru_cache_set_coroutine, block_size_in_bytes=<span class="hljs-number">4</span> *<br>   ...:  <span class="hljs-number">2</span>, number_of_ways_of_associativity=<span class="hljs-number">2</span>, number_of_cache_sets=<span class="hljs-number">4</span>)          <br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(cache)                                                             <br><br>In [<span class="hljs-number">5</span>]: cache.send((<span class="hljs-number">0</span>, <span class="hljs-literal">True</span>))                                                   <br>Out[<span class="hljs-number">5</span>]: (<span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br><br>In [<span class="hljs-number">6</span>]: cache.send((<span class="hljs-number">64</span>, <span class="hljs-literal">False</span>))                                                 <br>Out[<span class="hljs-number">6</span>]: (<span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br><br>In [<span class="hljs-number">7</span>]: cache.send((<span class="hljs-number">4</span>, <span class="hljs-literal">True</span>))                                                   <br>Out[<span class="hljs-number">7</span>]: (<span class="hljs-literal">True</span>, <span class="hljs-literal">None</span>)<br><br>In [<span class="hljs-number">8</span>]: cache.send((<span class="hljs-number">40</span>, <span class="hljs-literal">True</span>))                                                  <br>Out[<span class="hljs-number">8</span>]: (<span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br><br>In [<span class="hljs-number">9</span>]: cache.send((<span class="hljs-number">68</span>, <span class="hljs-literal">False</span>))                                                 <br>Out[<span class="hljs-number">9</span>]: (<span class="hljs-literal">True</span>, <span class="hljs-literal">None</span>)<br><br>In [<span class="hljs-number">10</span>]: cache.send((<span class="hljs-number">128</span>, <span class="hljs-literal">True</span>))                                                <br>Out[<span class="hljs-number">10</span>]: (<span class="hljs-literal">False</span>, <span class="hljs-number">0</span>)<br><br>In [<span class="hljs-number">11</span>]: cache.send((<span class="hljs-number">0</span>, <span class="hljs-literal">False</span>))                                                 <br>Out[<span class="hljs-number">11</span>]: (<span class="hljs-literal">False</span>, <span class="hljs-literal">None</span>)<br></code></pre></td></tr></table></figure><hr><h1 id="Thank-You"><a href="#Thank-You" class="headerlink" title="Thank You!"></a>Thank You!</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h1 id=&quot;Closures&quot;&gt;&lt;a href=&quot;#Closures&quot; class=&quot;headerlink&quot; title=&quot;Closures&quot;&gt;&lt;/a&gt;Closures&lt;/h1&gt;&lt;p&gt;Python supports nested function definitio</summary>
      
    
    
    
    <category term="Code" scheme="https://abbaswu.github.io/categories/Code/"/>
    
    <category term="Python" scheme="https://abbaswu.github.io/categories/Code/Python/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: The Fundamentals of Writing Questions</title>
    <link href="https://abbaswu.github.io/2022/10/26/Paper-Review-The-Fundamentals-of-Writing-Questions/"/>
    <id>https://abbaswu.github.io/2022/10/26/Paper-Review-The-Fundamentals-of-Writing-Questions/</id>
    <published>2022-10-26T07:00:00.000Z</published>
    <updated>2022-12-18T19:51:10.711Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://github.com/ubccpsc/507/tree/2022sept">Advanced Software Engineering</a>. The original paper can be found <a href="https://www.wiley.com/en-us/Internet,+Phone,+Mail,+and+Mixed+Mode+Surveys:+The+Tailored+Design+Method,+4th+Edition-p-9781118456149">here</a>.</p><p>This part of the book addresses the problem of crafting survey questions that respondents are willing to answer and respond to accurately. It first discusses issues to consider when designing survey questions, then presents the structure of a survey question and different question formats, before providing specific guidelines on wording survey questions.</p><h2 id="Issues-to-consider-when-designing-survey-questions"><a href="#Issues-to-consider-when-designing-survey-questions" class="headerlink" title="Issues to consider when designing survey questions"></a>Issues to consider when designing survey questions</h2><ul><li>What concepts to measure<ul><li>Recommended: Adopt established measures from existing surveys</li></ul></li><li>What data to collect<ul><li>Factual information: precise, readily available</li><li>Opinion: requires time to formulate, strongly influenced by context</li><li>Behavior: better memory of recent, memorable events compared with distant, mundane events</li></ul></li><li>What question format to use<ul><li>Different cognitive information processing for aural and visual surveys</li></ul></li><li>What mode to adopt<ul><li>The presence of an interviewer may speed up surveys, but may induce social desirability and acquiescence, leading to interviewer bias.</li><li>Lack of standardization among different interviewers may lead to interviewer variance.</li></ul></li><li>What to modify (from existing surveys)<ul><li>no changes or only minimal changes when replicating or comparing results<ul><li>questions should also be asked in a similar fashion</li></ul></li></ul></li><li>How to motivate respondents<ul><li>think about the cognitive process respondents go through</li><li>pay attention to the context and wording</li></ul></li></ul><h2 id="The-structure-of-a-survey-question"><a href="#The-structure-of-a-survey-question" class="headerlink" title="The structure of a survey question"></a>The structure of a survey question</h2><ul><li>Question stem</li><li>Additional instructions</li><li>Answer spaces or choices</li></ul><h2 id="Different-question-formats"><a href="#Different-question-formats" class="headerlink" title="Different question formats"></a>Different question formats</h2><ul><li>Open-ended<ul><li>rich, detailed</li><li>more prone to skipping</li><li>requires lengthy data processing</li></ul></li><li>Closed-ended<ul><li>nominal or ordinal categories</li><li>set of answer choices known in advance</li><li>easy to analyze</li></ul></li><li>Partially closed-ended<ul><li>closed-ended with “other” response</li><li>respondents more likely to select the options instead of “other”</li></ul></li></ul><h2 id="Specific-guidelines-on-wording-survey-questions"><a href="#Specific-guidelines-on-wording-survey-questions" class="headerlink" title="Specific guidelines on wording survey questions"></a>Specific guidelines on wording survey questions</h2><ul><li>Choose the appropriate question format.</li><li>Make sure the question applies to the respondent.</li><li>Ask one question at a time.</li><li>Make sure the question is technically accurate.</li><li>Use simple, familiar and specific words.</li><li>Use short, simple sentences that take a question form.</li><li>Avoid double negatives.</li><li>Organize questions in a more straightforward, comprehensible way.</li></ul><p>Also sprinkled throughout the section is the notion that the crafter should get into a respondent’s state of mind when crafting survey questions, and also test the survey questions to evaluate their quality.</p><p>This section is very comprehensive and convincing, as the author supports his arguments by analyzing specific examples from actual surveys, and also frequently quoting previous work on the topic. From such a chapter we can gain a deep understanding of the nature of survey questions, especially the underlying cognitive, psychology and sociology problems, as well as the best practices within the domain, and we can also refer to this chapter as a guide and checklist when we craft survey questions ourselves.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://github.com/ubccpsc/507/tree/2022sept&quot;&gt;Advanced Software Engineering&lt;/a&gt;. The original p</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Advanced Software Engineering" scheme="https://abbaswu.github.io/categories/Paper-Review/Advanced-Software-Engineering/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: ReCrash: Making Software Failures Reproducible by Preserving Object States</title>
    <link href="https://abbaswu.github.io/2022/10/25/Paper-Review-ReCrash-Making-Software-Failures-Reproducible-by-Preserving-Object-States/"/>
    <id>https://abbaswu.github.io/2022/10/25/Paper-Review-ReCrash-Making-Software-Failures-Reproducible-by-Preserving-Object-States/</id>
    <published>2022-10-25T07:00:00.000Z</published>
    <updated>2022-12-18T22:02:26.349Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://github.com/ubccpsc/507/tree/2022sept">Advanced Software Engineering</a>. The original paper can be found <a href="https://doi.org/10.1007/978-3-540-70592-5_23">here</a>.</p><h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><p>Reproduction is key to finding and fixing software problems and verifying proposed solutions, but reproduction can be difficult.</p><ul><li>Nondeterminism: A problem may depend on timing (e.g., context switching), memory layout (e.g., hash codes), or random number generators.</li><li>Remote detection: A problem may be discovered by someone other than the developer, and it may depend on implicit program inputs such as user GUI actions, environment variables, the state of the file system, operating system behavior, etc. This information may be easy to miss, difficult to collect, or confidential.</li><li>Test case complexity: The exposing execution might be complex, and the buggy method might be called multiple times before the bug is triggered.</li></ul><hr><h1 id="Proposed-Solution-ReCrash"><a href="#Proposed-Solution-ReCrash" class="headerlink" title="Proposed Solution: ReCrash"></a>Proposed Solution: ReCrash</h1><p>ReCrash maintains a <strong>shadow stack</strong> with copies of the receiver and arguments to each method during execution of the target program.</p><ul><li>Several copy strategies</li><li>Several optimizations</li></ul><p>When the program crashes, ReCrash serializes the shadow stack, and generates <strong>unit tests</strong> by calling <strong>each</strong> method on the shadow call stack with their receiver and arguments.</p><ul><li>Calling the method at top of the call stack may not provide enough context.</li><li>Calling a method closer to the bottom provides more context, but is less likely to reproduce the original failure.</li></ul><hr><h1 id="Proposed-Solution-ReCrash-1"><a href="#Proposed-Solution-ReCrash-1" class="headerlink" title="Proposed Solution: ReCrash"></a>Proposed Solution: ReCrash</h1><p>Assumption:</p><ul><li>It is possible to reproduce many failures with only some of the information available on entry to the methods on the stack at the time of the failure.<ul><li>Many bugs are dependent on small parts of the heap.</li><li>Good object-oriented style encapsulates important state nearby.</li><li>Good object-oriented style avoids excessive use of globals.</li></ul></li><li>ReCrash has access to and will store any parts of the global state or environment that are passed as method arguments.</li></ul><p><strong>Question: What if global state is read or written in the method?</strong></p><hr><h1 id="Monitoring-Phase"><a href="#Monitoring-Phase" class="headerlink" title="Monitoring Phase"></a>Monitoring Phase</h1><ul><li>Several copy strategies</li><li>Several optimizations<ul><li>Monitoring fewer methods</li><li>Second-chance mode</li></ul></li></ul><hr><h1 id="Copy-Strategies"><a href="#Copy-Strategies" class="headerlink" title="Copy Strategies"></a>Copy Strategies</h1><p>An argument may be side-effected between the method entry and the point of the failure in the method. Copying strategies:</p><ul><li>Reference: copying only the reference to the argument.</li><li>Shallow: copying the argument itself.</li><li>Depth-i: copying all the state reachable with $\le i$ dereferences from the argument.</li><li>Deep-copy: copying the entire state.</li></ul><p>Options:</p><ul><li>Used-fields: deeper copying on fields that are used (read or written) in the method.</li></ul><p>ReCrash always uses the reference strategy for immutable parameters. </p><hr><h1 id="Monitoring-Fewer-Methods"><a href="#Monitoring-Fewer-Methods" class="headerlink" title="Monitoring Fewer Methods"></a>Monitoring Fewer Methods</h1><p>Dosen’t monitor methods that cannot be used in the generated tests, or are unlikely to expose problems.</p><ul><li>non-public methods</li><li>empty methods</li><li>simple methods such as getters and setters (no more than 6 opcodes)</li></ul><hr><h1 id="Second-chance-Mode"><a href="#Second-chance-Mode" class="headerlink" title="Second-chance Mode"></a>Second-chance Mode</h1><ul><li>ReCrash initially monitors no method calls.</li><li>Each time a failure occurs, ReCrash enables method argument monitoring for all methods found on the stack trace.</li><li>Efficient, but requires a failure to be repeated twice. If the developer doesn’t mind missing the first time a failure happens, and the failure occurs relatively often, second chance mode is a good fit.</li></ul><p><strong>Question: could recording all inputs provided to the program be used in tandom with second-chance mode (such that the failure is probable to happen the second time)?</strong></p><hr><h1 id="Test-Generation-Phase"><a href="#Test-Generation-Phase" class="headerlink" title="Test Generation Phase"></a>Test Generation Phase</h1><p>ReCrash generates a test for each of the methods in the shadow stack.</p><ul><li>Restores the state of the arguments that were passed to a method.</li><li>Invokes the method the same way it was invoked in the original execution. Only tests that end with the same exception as the original failure are saved.</li><li>Storing more than one test that ends with the same failure is useful. Some tests reproduce a failure, but would not help the developer understand, fix, or check her solution.</li></ul><hr><h1 id="Experimental-Study"><a href="#Experimental-Study" class="headerlink" title="Experimental Study"></a>Experimental Study</h1><p>Subject programs:</p><ul><li>Javac-jsr308: the OpenJDK Java compiler, extended with JSR308 (“Annotations on Java Types”), with four crashes provided by the developers.</li><li>SVNKit: a subversion  client, with three crash examples from bug reports.</li><li>Eclipsec: a Java compiler included in the Eclipse JDT, with a crash found in the Eclipse bug database.</li><li>BST: a toy subject program used by Csallner in evaluating CnC, with three crashes found by CnC.</li></ul><hr><h1 id="Experimental-Study-1"><a href="#Experimental-Study-1" class="headerlink" title="Experimental Study"></a>Experimental Study</h1><p>For each subject program:</p><ul><li>Run PIDASA for parameter immutability classification.</li><li>For different argument copying strategies, with and without second-chance mode:<ul><li>Run ReCrash on inputs that made the subject programs crash.</li><li>Count how many test cases reproduced each crash.</li></ul></li></ul><p><strong>Question: how useful would ReCrash be in reality where it is unknown whether the subject projects could crash, and which inputs would make the subject programs crash?</strong></p><hr><h1 id="Experimental-Study-2"><a href="#Experimental-Study-2" class="headerlink" title="Experimental Study"></a>Experimental Study</h1><p>Research questions:</p><ul><li>How reliably can ReCrashJ reproduce crashes?</li><li>What is the size of the stored deep copy of the shadow stack?</li><li>Are the tests generated by ReCrash useful for debugging?<ul><li>Like a <strong>case study</strong>: an analysis of two crashes, and comments from developers</li></ul></li><li>What is the overhead (time and memory) of running ReCrash?</li></ul><p>Aspects assessed:</p><ul><li>different argument copying strategies</li><li>with and without second-chance mode</li></ul><hr><h1 id="How-reliably-can-ReCrash-reproduce-crashes"><a href="#How-reliably-can-ReCrash-reproduce-crashes" class="headerlink" title="How reliably can ReCrash reproduce crashes?"></a>How reliably can ReCrash reproduce crashes?</h1><p>ReCrash was able to reproduce the crash in all cases.</p><ul><li>For some crashes, every candidate test case reproduces the crash.</li><li>For other crashes, only a subset of the generated test cases reproduces the crash.</li></ul><p>In most cases, simply copying references is enough to reproduce crashes. In other cases, using the shallow copying strategy with used-fields was necessary.</p><hr><h1 id="What-is-the-size-of-the-stored-deep-copy-of-the-shadow-stack"><a href="#What-is-the-size-of-the-stored-deep-copy-of-the-shadow-stack" class="headerlink" title="What is the size of the stored deep copy of the shadow stack?"></a>What is the size of the stored deep copy of the shadow stack?</h1><p><img src="/images/subject_programs_and_crashes_used_in_our_experimental_study.png" alt="Subject Programs and Crashes Used in our Experimental Study"></p><p><strong>Question: why isn’t it compared with the program size and the program memory usage?</strong></p><hr><h1 id="An-analysis-of-two-crashes"><a href="#An-analysis-of-two-crashes" class="headerlink" title="An analysis of two crashes"></a>An analysis of two crashes</h1><p>Eclipsec bug e1:</p><ul><li>Eclipsec crashes in callee <code>canBeInstantiated</code> because an earlier if statement in the caller <code>resolveType</code> failed to set a boolean flag <code>hasError</code> to true.</li><li>The test case for <code>canBeInstantiated</code> will reproduce the crash, but is not helpful.</li><li>Demonstrates importance of generating tests for multiple methods on the stack.</li></ul><p>Javac-jsr308 bug j4:</p><ul><li>Compiling source code containing an annotation with too many arguments results in an index-out-of-bounds exception in method <code>visitMethodInvocation</code>. </li><li>The generated test does not require the whole source code and encodes only the necessary minimum to reproduce the crash.</li><li>Useful when the compiler crash happens in the field, and the user cannot provide the entire source code for debugging.</li></ul><hr><h1 id="Comments-from-Developers"><a href="#Comments-from-Developers" class="headerlink" title="Comments from Developers"></a>Comments from Developers</h1><p>We gave the tests for j1-4 to two Javac-jsr308 developers and asked for comments about the tests’ usefulness, receiving positive responses.</p><ul><li>I often have to climb back up through a stack trace when debugging. ReCrash seems to generate a test method for multiple levels of the stack, making it useful.</li><li>I find that you wouldn’t have to wait for the crash to occur again useful.</li><li>When I set a break point, the break point maybe be executed multiple times before the error. Using ReCrash, I was able to jump (almost directly) to the necessary breakpoint.</li></ul><p><strong>Question: Why only analyze two crashes and ask only two developers?</strong></p><hr><h1 id="What-is-the-overhead-time-and-memory-of-running-ReCrash"><a href="#What-is-the-overhead-time-and-memory-of-running-ReCrash" class="headerlink" title="What is the overhead (time and memory) of running ReCrash?"></a>What is the overhead (time and memory) of running ReCrash?</h1><h2 id="Time-overhead"><a href="#Time-overhead" class="headerlink" title="Time overhead"></a>Time overhead</h2><p>Non second-chance mode:</p><ul><li>Copying only the references can be expensive (11%-42%), and shallow copying with used-fields is similar (13%–60%). Usable for in-house testing.</li><li>Deep copying is completely unusable (12,000%-638,000%).</li></ul><p>Second-chance mode:</p><ul><li>A barely noticeable 0%–1.7% under copying only the references and shallow copying with used-fields, after a crash has already been observed.</li></ul><hr><h1 id="What-is-the-overhead-time-and-memory-of-running-ReCrash-1"><a href="#What-is-the-overhead-time-and-memory-of-running-ReCrash-1" class="headerlink" title="What is the overhead (time and memory) of running ReCrash?"></a>What is the overhead (time and memory) of running ReCrash?</h1><h2 id="Memory-overhead"><a href="#Memory-overhead" class="headerlink" title="Memory overhead"></a>Memory overhead</h2><p>Non second-chance mode:</p><ul><li>0.2M–4.7M (2.6%-90.3%) under shallow copying with used-fields.</li></ul><p>Second-chance mode:</p><ul><li>negligible</li></ul><hr><h1 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h1><p>ReCrashJ is usable in real software deployment</p><ul><li>Simple to implement</li><li>Scalable</li><li>Generates simple, helpful test cases that effectively reproduce failures</li><li>Time and memory overhead (13%–60%, 2.6%-90.3%) under non second-chance mode and shallow copying with used-fields usable for in-house testing</li><li>Extremely efficient under second-chance mode</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://github.com/ubccpsc/507/tree/2022sept&quot;&gt;Advanced Software Engineering&lt;/a&gt;. The original p</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Advanced Software Engineering" scheme="https://abbaswu.github.io/categories/Paper-Review/Advanced-Software-Engineering/"/>
    
    
  </entry>
  
  <entry>
    <title>Paper Review: All You Ever Wanted to Know About Dynamic Taint Analysis and Forward Symbolic Execution (but might have been afraid to ask)</title>
    <link href="https://abbaswu.github.io/2022/10/25/Paper-Review-All-You-Ever-Wanted-to-Know-About-Dynamic-Taint-Analysis-and-Forward-Symbolic-Execution-but-might-have-been-afraid-to-ask/"/>
    <id>https://abbaswu.github.io/2022/10/25/Paper-Review-All-You-Ever-Wanted-to-Know-About-Dynamic-Taint-Analysis-and-Forward-Symbolic-Execution-but-might-have-been-afraid-to-ask/</id>
    <published>2022-10-25T07:00:00.000Z</published>
    <updated>2022-12-19T07:44:38.128Z</updated>
    
    <content type="html"><![CDATA[<p>NOTE: This is a Paper Review for <a href="https://www.carolemieux.com/teaching/CPSC539L_2022w1.html">Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis</a>. The original paper can be found <a href="https://doi.org/10.1109/SP.2010.26">here</a>.</p><p>Forward symbolic execution and dynamic taint analysis are quickly becoming “staple techniques in security analyses”. </p><ol><li>Dynamic taint analysis runs a program and observes which computations are affected by predefined taint sources such as user input.</li><li>Dynamic forward symbolic execution automatically builds a logical formula describing a program execution path, which reduces the problem of reasoning about the execution to logic, allowing us to reason about the behavior of a program on many different inputs at one time.</li><li>The two analyses can be used in conjunction to build formulas representing only the parts of an execution that depend upon tainted values.</li></ol><p>Forward symbolic execution:</p><ol><li>Test Case Generation (automatically generate inputs to test programs, generate inputs that cause two implementations of the same protocol to behave differently)</li><li>Automatic Input Filter Generation (input filters that detect and remove exploits from the input stream)</li></ol><p>Cristian Cadar, Daniel Dunbar, and Dawson Engler. Klee: Unassisted and automatic generation of high-coverage tests for complex systems programs. In Proceedings of the USENIX Symposium on Operating System Design and Implementation, 2008.</p><p>Cristian Cadar, Vijay Ganesh, Peter Pawlowski, David Dill, and Dawson Engler. EXE: A system for automatically generating inputs of death using symbolic execution. In Proceedings of the ACM Conference on Computer and Communications Security, October 2006.</p><p>Patrice Godefroid, Nils Klarlund, and Koushik Sen. DART: Directed automated random testing. In Proceedings of the ACM Conference on Programming Language Design and Implementation, 2005.</p><p>Dynamic taint analysis:</p><ol><li>Unknown Vulnerability Detection (misuses of user input)</li><li>Automatic Network Protocol Understanding. Dynamic taint analysis has been used to automatically understand the behavior of network protocols when given an implementation of the protocol.</li><li>Malware Analysis (analyze how information flows through a malware binary, explore trigger-based behavior, and detect emulators)</li></ol><p>However, there has been little effort to formally define them and summarize critical issues that arise when applying these techniques in “typical security contexts”.</p><p>The authors formalize the runtime semantics of dynamic taint analysis and forward symbolic execution by using SIMPIL (Simple Intermediate Language), which is “representative of internal representations used by compilers and is powerful enough to express typical languages”.</p><hr><p>Concepts:</p><ul><li>Statements: assignments, assertions, jumps, conditional jumps.</li><li>Expressions: constants, variables, binary operators, unary operators, get_input.</li><li>Execution state: the list of program statements, the current memory state, the current value for variables, the program counter, the current statement.</li></ul><p>Notation:</p><ul><li>$\Sigma$: list of program statements<ul><li>$\Sigma[v_1]$: statement at $pc &#x3D; v_1$.</li></ul></li><li>$\mu$: memory state<ul><li>$\mu[v_1]$: memory content at address $v_1$</li></ul></li><li>$\Delta$: register state (values of all variables)<ul><li>$\Delta[x]$: value of variable $x$</li><li>$\Delta[x \leftarrow 10]$: setting the value of variable $x$ to 10</li></ul></li><li>$pc$: program counter.</li><li>$\mu, \Delta \vdash e \Downarrow v$: Given memory state $\mu$ and register state $\Delta$, the value of expression $e$ is $v$.</li><li>$\Sigma, \mu, \Delta, pc, EXPRESSION \rightsquigarrow \Sigma, \mu’, \Delta’, pc’, {EXPRESSION}’$: Given list of program statements $\Sigma$, memory state $\mu$, register state $\Delta$, program counter $pc$, executing expression $EXPRESSION$ leads to new memory state $\mu’$, new register state $\Delta’$, new program counter $pc’$, and the next expression is ${EXPRESSION}’$.</li></ul><p>Other high-level language constructs such as functions or scopes can be easily represented using these constructs.</p><hr><p>Dynamic taint analysis tracks values in a program dependent on data derived from a “taint source” at runtime. As it is conducted at runtime, it can be expressed by extending SIMPIL.</p><p>Dynamic taint analysis is conducted in different ways (i.e., under different “taint policies”) for different applications. The differences lie in “how new taint is introduced to a program”, “how taint propagates as instructions execute”, and “how taint is checked during execution”. The author presents the example of the “tainted jump policy” for attack detection, points out several challenges it faces, and analyzes the proposed solutions.</p><ul><li>“Distinguishing between memory addresses and cells is not always appropriate”. An alternative “tainted addresses policy” could be used, but this may also overtaint.</li><li>Information flow can occur through control dependencies in addition to dataflow dependencies. This requires “reasoning about multiple paths”, while pure dynamic taint analysis “executes on a single path at a time”. Solutions include “supplementing dynamic analysis with static analysis” and “using heuristics”.</li><li>Taint is only added and never removed (i.e., “sanitized”), leading to the problem of “taint spread”, reducing precision. Well-known constant functions (i.e. using XOR to zero out registers in x86 code) can be checked. In addition, we can consider the outputs of some functions like cryptographic hash functions as untainted, due to limited influence of input on output. This can be quantified (Newsome  et al.) to automatically recognize such cases. Furthermore, values can be untainted “if the program logic performs sanitization itself” (e.g., index bounds checking).</li></ul><p>In conclusion, this paper is an useful introductory paper in forward symbolic execution and dynamic taint analysis, and I have mainly learned the following two things from the paper:</p><ul><li>The idea of formalizing runtime semantics using RISC-like bytecode</li><li>An introduction to dynamic taint analysis - what it is, what it can do, and what challenges it faces</li></ul><hr><p>Feedback from the Class Discussion</p><ul><li>What is the difference between a statement and an expression? A statement can modify program state when it is executed, while an expression doesn’t modify program state.</li><li>In the formalism of SIMPIL, we determine which expression to evaluate by <strong>pattern-matching the rule</strong>.</li><li>LLVM has a dataflow sanitization pass, which may be useful for implementing taint analysis.</li><li>Dynamic program analysis only looks at a single path. If we are to <strong>prove something about a program</strong>, static program analysis would be a better direction.</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;NOTE: This is a Paper Review for &lt;a href=&quot;https://www.carolemieux.com/teaching/CPSC539L_2022w1.html&quot;&gt;Topics in Programming Languages: Aut</summary>
      
    
    
    
    <category term="Paper Review" scheme="https://abbaswu.github.io/categories/Paper-Review/"/>
    
    <category term="Topics in Programming Languages: Automated Testing, Bug Detection, and Program Analysis" scheme="https://abbaswu.github.io/categories/Paper-Review/Topics-in-Programming-Languages-Automated-Testing-Bug-Detection-and-Program-Analysis/"/>
    
    
  </entry>
  
</feed>
